<!DOCTYPE html>
<html lang="zh-CN">
    <head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/tree/5.4.0'>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta name="generator" content="Hexo 6.3.0">
  <meta name="Volantis" content="5.4.0">
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
  <link rel="canonical" href="http://adversarr.github.io/2022/12/04/cg/siggraph-courses/sig2021course-intro-to-pba/"/>
  <!-- 渲染优化 -->
    <meta http-equiv='x-dns-prefetch-control' content='on' />
      <link rel='dns-prefetch' href='https://unpkg.com'>
      <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Content-Security-Policy" content=" default-src 'self' https:; block-all-mixed-content; base-uri 'self' https:; form-action 'self' https:; worker-src 'self' https:; connect-src 'self' https: *; img-src 'self' data: https: *; media-src 'self' https: *; font-src 'self' data: https: *; frame-src 'self' https: *; manifest-src 'self' https: *; child-src https:; script-src 'self' https: 'unsafe-inline' *; style-src 'self' https: 'unsafe-inline' *; ">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <!-- import head_begin begin -->
  <!-- import head_begin end -->
  <!-- Custom Files headBegin begin-->
  
  <!-- Custom Files headBegin end-->
    <link rel="shortcut icon" type='image/x-icon' href="/image/favicon.webp">
  <link rel="preload" href="/css/style.1154b99c.css" as="style">
  <link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
<link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <!-- feed -->
      <link rel="alternate" href="/atom.xml" title="Adversarr's Blog" type="application/atom+xml">
  <!-- 页面元数据 -->
  <title>Siggraph 2021 course - An Introduction to Physics-based Animation - Adversarr's Blog</title>
  <meta name="keywords" content="study">
  <meta desc name="description" content="Siggraph 2021 course notes.
See more in Siyuan. - Adversarr - Adversarr's Blog">
  
<meta property="og:type" content="article">
<meta property="og:title" content="Siggraph 2021 course - An Introduction to Physics-based Animation">
<meta property="og:url" content="http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/index.html">
<meta property="og:site_name" content="Adversarr&#39;s Blog">
<meta property="og:description" content="Siggraph 2021 course notes. See more in Siyuan.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
<meta property="article:published_time" content="2022-12-04T15:15:08.000Z">
<meta property="article:modified_time" content="2023-02-05T04:00:01.093Z">
<meta property="article:author" content="Adversarr">
<meta property="article:tag" content="study">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
  <style>
    /* 首屏样式 */
    #safearea {
  display: none;
}
/*
  * Workaround for Chrome bug, part 1
  * Chunk rendering for all but the first article.
  * /layout/_partial/scripts/content-visibility-scroll-fix.ejs
*/
.post-story + .post-story {
  content-visibility: auto;
  contain-intrinsic-size: 10px 500px;
}
:root {
  --color-site-body: #f4f4f4;
  --color-site-bg: #f4f4f4;
  --color-site-inner: #fff;
  --color-site-footer: #666;
  --color-card: #fff;
  --color-text: #444;
  --color-block: #f6f6f6;
  --color-inlinecode: #c74f00;
  --color-codeblock: #fff7ea;
  --color-h1: #3a3a3a;
  --color-h2: #3a3a3a;
  --color-h3: #333;
  --color-h4: #444;
  --color-h5: #555;
  --color-h6: #666;
  --color-p: #444;
  --color-list: #666;
  --color-list-hl: #30ad91;
  --color-meta: #888;
  --color-read-bkg: #e0d8c8;
  --color-read-post: #f8f1e2;
}
* {
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  outline: none;
  margin: 0;
  padding: 0;
}
*::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
*::-webkit-scrollbar-track-piece {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: #3dd9b6;
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
*::-webkit-scrollbar-thumb:hover {
  background: #ff5722;
}
html {
  color: var(--color-text);
  width: 100%;
  height: 100%;
  font-family: Menlo, UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  font-size: 16px;
}
html >::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
html >::-webkit-scrollbar-track-piece {
  background: transparent;
}
html >::-webkit-scrollbar-thumb {
  background: #3dd9b6;
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
html >::-webkit-scrollbar-thumb:hover {
  background: #ff5722;
}
body {
  background-color: var(--color-site-body);
  text-rendering: optimizelegibility;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  line-height: 1.6;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}
body.modal-active {
  overflow: hidden;
}
@media screen and (max-width: 680px) {
  body.modal-active {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
a {
  color: #2092ec;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
a:hover {
  color: #ff5722;
}
a:active,
a:hover {
  outline: 0;
}
ul,
ol {
  padding-left: 0;
}
ul li,
ol li {
  list-style: none;
}
header {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
img {
  border: 0;
  background: none;
  max-width: 100%;
}
svg:not(:root) {
  overflow: hidden;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  height: 0;
  border: 0;
  border-radius: 1px;
  -webkit-border-radius: 1px;
  border-bottom: 1px solid rgba(68,68,68,0.1);
}
button,
input {
  color: inherit;
  font: inherit;
  margin: 0;
}
button {
  overflow: visible;
  text-transform: none;
  -webkit-appearance: button;
  cursor: pointer;
}
@supports (backdrop-filter: blur(20px)) {
  .blur {
    background: rgba(255,255,255,0.9) !important;
    backdrop-filter: saturate(200%) blur(20px);
  }
}
.shadow {
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.shadow.floatable {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.shadow.floatable:hover {
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
}
#l_cover {
  min-height: 64px;
}
.cover-wrapper {
  top: 0;
  left: 0;
  max-width: 100%;
  height: 100vh;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  align-self: center;
  align-content: center;
  color: var(--color-site-inner);
  padding: 0 16px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  position: relative;
  overflow: hidden;
  margin-bottom: -100px;
}
.cover-wrapper .cover-bg {
  position: absolute;
  width: 100%;
  height: 100%;
  background-position: center;
  background-size: cover;
  -webkit-background-size: cover;
  -moz-background-size: cover;
}
.cover-wrapper .cover-bg.lazyload:not(.loaded) {
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
}
.cover-wrapper .cover-bg.lazyload.loaded {
  animation-delay: 0s;
  animation-duration: 0.5s;
  animation-fill-mode: forwards;
  animation-timing-function: ease-out;
  animation-name: fadeIn;
}
@-moz-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  z-index: 1;
  position: relative;
  width: 100%;
  height: 100%;
}
.cover-wrapper#full {
  height: calc(100vh + 100px);
  padding-bottom: 100px;
}
.cover-wrapper#half {
  max-height: 640px;
  min-height: 400px;
  height: calc(36vh - 64px + 200px);
}
.cover-wrapper #scroll-down {
  width: 100%;
  height: 64px;
  position: absolute;
  bottom: 100px;
  text-align: center;
  cursor: pointer;
}
.cover-wrapper #scroll-down .scroll-down-effects {
  color: #fff;
  font-size: 24px;
  line-height: 64px;
  position: absolute;
  width: 24px;
  left: calc(50% - 12px);
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  animation: scroll-down-effect 1.5s infinite;
  -webkit-animation: scroll-down-effect 1.5s infinite;
  -khtml-animation: scroll-down-effect 1.5s infinite;
  -moz-animation: scroll-down-effect 1.5s infinite;
  -o-animation: scroll-down-effect 1.5s infinite;
  -ms-animation: scroll-down-effect 1.5s infinite;
}
@-moz-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  margin-top: 64px;
  margin-bottom: 100px;
}
.cover-wrapper .cover-body,
.cover-wrapper .cover-body .top,
.cover-wrapper .cover-body .bottom {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  max-width: 100%;
}
.cover-wrapper .cover-body .bottom {
  margin-top: 32px;
}
.cover-wrapper .cover-body .title {
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
  font-size: 3.125rem;
  line-height: 1.2;
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cover-wrapper .cover-body .subtitle {
  font-size: 20px;
}
.cover-wrapper .cover-body .logo {
  max-height: 120px;
  max-width: calc(100% - 4 * 16px);
}
@media screen and (min-height: 1024px) {
  .cover-wrapper .cover-body .title {
    font-size: 3rem;
  }
  .cover-wrapper .cover-body .subtitle {
    font-size: 1.05rem;
  }
  .cover-wrapper .cover-body .logo {
    max-height: 150px;
  }
}
.cover-wrapper .cover-body .m_search {
  position: relative;
  max-width: calc(100% - 16px);
  width: 320px;
  vertical-align: middle;
}
.cover-wrapper .cover-body .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  width: 100%;
}
.cover-wrapper .cover-body .m_search .icon,
.cover-wrapper .cover-body .m_search .input {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.cover-wrapper .cover-body .m_search .icon {
  position: absolute;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  line-height: 2.5rem;
  width: 32px;
  top: 0;
  left: 5px;
  color: rgba(68,68,68,0.75);
}
.cover-wrapper .cover-body .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  height: 2.5rem;
  width: 100%;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  font-size: 0.875rem;
  -webkit-appearance: none;
  padding-left: 36px;
  border-radius: 1.4rem;
  -webkit-border-radius: 1.4rem;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(10px);
  border: none;
  color: var(--color-text);
}
@media screen and (max-width: 500px) {
  .cover-wrapper .cover-body .m_search .input {
    padding-left: 36px;
  }
}
.cover-wrapper .cover-body .m_search .input:hover {
  background: rgba(255,255,255,0.8);
}
.cover-wrapper .cover-body .m_search .input:focus {
  background: #fff;
}
.cover-wrapper .list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  -khtml-flex-wrap: wrap;
  -moz-flex-wrap: wrap;
  -o-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  align-items: stretch;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.cover-wrapper .list-h a {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 0;
  -ms-flex: 1 0;
  flex: 1 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  font-weight: 600;
}
.cover-wrapper .list-h a img {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  border-radius: 2px;
  -webkit-border-radius: 2px;
  margin: 4px;
  min-width: 40px;
  max-width: 44px;
}
@media screen and (max-width: 768px) {
  .cover-wrapper .list-h a img {
    min-width: 36px;
    max-width: 40px;
  }
}
@media screen and (max-width: 500px) {
  .cover-wrapper .list-h a img {
    margin: 2px 4px;
    min-width: 32px;
    max-width: 36px;
  }
}
@media screen and (max-width: 375px) {
  .cover-wrapper .list-h a img {
    min-width: 28px;
    max-width: 32px;
  }
}
.cover-wrapper {
  max-width: 100%;
}
.cover-wrapper.search .bottom .menu {
  margin-top: 16px;
}
.cover-wrapper.search .bottom .menu .list-h a {
  white-space: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  align-items: baseline;
  padding: 2px;
  margin: 4px;
  color: var(--color-site-inner);
  opacity: 0.75;
  -webkit-opacity: 0.75;
  -moz-opacity: 0.75;
  text-shadow: 0 1px 2px rgba(0,0,0,0.05);
  border-bottom: 2px solid transparent;
}
.cover-wrapper.search .bottom .menu .list-h a i {
  margin-right: 4px;
}
.cover-wrapper.search .bottom .menu .list-h a p {
  font-size: 0.9375rem;
}
.cover-wrapper.search .bottom .menu .list-h a:hover,
.cover-wrapper.search .bottom .menu .list-h a.active,
.cover-wrapper.search .bottom .menu .list-h a:active {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
  border-bottom: 2px solid var(--color-site-inner);
}
.cover-wrapper.dock .menu,
.cover-wrapper.featured .menu,
.cover-wrapper.focus .menu {
  border-radius: 6px;
  -webkit-border-radius: 6px;
}
.cover-wrapper.dock .menu .list-h a,
.cover-wrapper.featured .menu .list-h a,
.cover-wrapper.focus .menu .list-h a {
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  padding: 12px;
  line-height: 24px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  border-bottom: none;
  text-align: center;
  align-content: flex-end;
  color: rgba(68,68,68,0.7);
  font-size: 1.5rem;
}
@media screen and (max-width: 500px) {
  .cover-wrapper.dock .menu .list-h a,
  .cover-wrapper.featured .menu .list-h a,
  .cover-wrapper.focus .menu .list-h a {
    padding: 12px 8px;
  }
}
.cover-wrapper.dock .menu .list-h a i,
.cover-wrapper.featured .menu .list-h a i,
.cover-wrapper.focus .menu .list-h a i {
  margin: 8px;
}
.cover-wrapper.dock .menu .list-h a p,
.cover-wrapper.featured .menu .list-h a p,
.cover-wrapper.focus .menu .list-h a p {
  font-size: 0.875rem;
}
.cover-wrapper.dock .menu .list-h a.active,
.cover-wrapper.featured .menu .list-h a.active,
.cover-wrapper.focus .menu .list-h a.active {
  background: var(--color-card);
  backdrop-filter: none;
}
.cover-wrapper.dock .menu .list-h a.active i,
.cover-wrapper.featured .menu .list-h a.active i,
.cover-wrapper.focus .menu .list-h a.active i,
.cover-wrapper.dock .menu .list-h a.active i+p,
.cover-wrapper.featured .menu .list-h a.active i+p,
.cover-wrapper.focus .menu .list-h a.active i+p {
  color: #3dd9b6;
}
.cover-wrapper.dock .menu .list-h a.active img+p,
.cover-wrapper.featured .menu .list-h a.active img+p,
.cover-wrapper.focus .menu .list-h a.active img+p {
  color: var(--color-text);
}
.cover-wrapper.dock .menu .list-h a:hover,
.cover-wrapper.featured .menu .list-h a:hover,
.cover-wrapper.focus .menu .list-h a:hover {
  background: var(--color-card);
}
.cover-wrapper.dock .top {
  margin-bottom: 48px;
}
.cover-wrapper.dock .menu {
  background: rgba(255,255,255,0.5);
  position: absolute;
  bottom: 0;
  max-width: 100%;
}
.cover-wrapper.dock .menu .list-h {
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  margin: 4px;
}
.cover-wrapper.dock .menu .list-h a+a {
  margin-left: 4px;
}
@media screen and (max-width: 500px) {
  .cover-wrapper.dock .menu .list-h {
    overflow-x: scroll;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar {
    height: 0;
    width: 0;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece {
    background: transparent;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb {
    background: #3dd9b6;
    cursor: pointer;
    border-radius: 0;
    -webkit-border-radius: 0;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover {
    background: #ff5722;
  }
}
@supports (backdrop-filter: blur(20px)) {
  .cover-wrapper.dock .menu {
    background: rgba(255,255,255,0.5);
    backdrop-filter: saturate(200%) blur(20px);
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --color-mode: 'dark';
  }
  :root:not([color-scheme]) {
    --color-site-body: #121212;
    --color-read-bkg: #1f1f1f;
    --color-read-post: #262626;
    --color-site-bg: #1f1f1f;
    --color-site-inner: rgba(238,238,238,0.871);
    --color-site-footer: rgba(170,170,170,0.871);
    --color-card: #262626;
    --color-text: rgba(238,238,238,0.871);
    --color-block: #434343;
    --color-codeblock: #1f1f1f;
    --color-inlinecode: #d56d28;
    --color-h1: rgba(255,255,255,0.871);
    --color-h2: rgba(255,255,255,0.871);
    --color-h3: rgba(255,255,255,0.6);
    --color-h4: rgba(255,255,255,0.6);
    --color-h5: rgba(255,255,255,0.6);
    --color-h6: rgba(255,255,255,0.6);
    --color-p: rgba(217,217,217,0.871);
    --color-list: rgba(217,217,217,0.871);
    --color-list-hl: #63e0c4;
    --color-meta: rgba(191,191,191,0.871);
    --color-link: rgba(191,191,191,0.871);
  }
  :root:not([color-scheme]) img {
    filter: brightness(70%) !important;
  }
  :root:not([color-scheme]) .blur {
    background: rgba(31,31,31,0.9) !important;
  }
  :root:not([color-scheme]) .white-box.blur {
    background: rgba(38,38,38,0.9) !important;
  }
  :root:not([color-scheme]) .nav-main .u-search-input {
    background: var(--color-card) !important;
  }
  :root:not([color-scheme]) #l_main .article .prev-next>a {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) #l_main .article .prev-next>a:hover {
    background: var(--color-site-bg) !important;
  }
  :root:not([color-scheme]) .article blockquote {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) .article-title a {
    color: var(--color-h1) !important;
  }
  :root:not([color-scheme]) details>summary {
    color: var(--color-p) !important;
    background: var(--color-site-bg) !important;
  }
  :root:not([color-scheme]) details {
    border: 1px solid var(--color-site-bg) !important;
    background: var(--color-site-bg) !important;
  }
  :root:not([color-scheme]) #u-search .modal,
  :root:not([color-scheme]) #u-search .modal-header,
  :root:not([color-scheme]) #u-search .modal-body {
    background: var(--color-card) !important;
  }
  :root:not([color-scheme]) #u-search .modal-body .modal-results .result:hover {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) .u-search-input:hover {
    background: var(--color-block) !important;
  }
  :root:not([color-scheme]) .u-search-input:focus {
    background: var(--color-site-body) !important;
  }
}
[color-scheme='dark'] {
  --color-site-body: #121212;
  --color-read-bkg: #1f1f1f;
  --color-read-post: #262626;
  --color-site-bg: #1f1f1f;
  --color-site-inner: rgba(238,238,238,0.871);
  --color-site-footer: rgba(170,170,170,0.871);
  --color-card: #262626;
  --color-text: rgba(238,238,238,0.871);
  --color-block: #434343;
  --color-codeblock: #1f1f1f;
  --color-inlinecode: #d56d28;
  --color-h1: rgba(255,255,255,0.871);
  --color-h2: rgba(255,255,255,0.871);
  --color-h3: rgba(255,255,255,0.6);
  --color-h4: rgba(255,255,255,0.6);
  --color-h5: rgba(255,255,255,0.6);
  --color-h6: rgba(255,255,255,0.6);
  --color-p: rgba(217,217,217,0.871);
  --color-list: rgba(217,217,217,0.871);
  --color-list-hl: #63e0c4;
  --color-meta: rgba(191,191,191,0.871);
  --color-link: rgba(191,191,191,0.871);
}
[color-scheme='dark'] img {
  filter: brightness(70%) !important;
}
[color-scheme='dark'] .blur {
  background: rgba(31,31,31,0.9) !important;
}
[color-scheme='dark'] .white-box.blur {
  background: rgba(38,38,38,0.9) !important;
}
[color-scheme='dark'] .nav-main .u-search-input {
  background: var(--color-card) !important;
}
[color-scheme='dark'] #l_main .article .prev-next>a {
  background: var(--color-block) !important;
}
[color-scheme='dark'] #l_main .article .prev-next>a:hover {
  background: var(--color-site-bg) !important;
}
[color-scheme='dark'] .article blockquote {
  background: var(--color-block) !important;
}
[color-scheme='dark'] .article-title a {
  color: var(--color-h1) !important;
}
[color-scheme='dark'] details>summary {
  color: var(--color-p) !important;
  background: var(--color-site-bg) !important;
}
[color-scheme='dark'] details {
  border: 1px solid var(--color-site-bg) !important;
  background: var(--color-site-bg) !important;
}
[color-scheme='dark'] #u-search .modal,
[color-scheme='dark'] #u-search .modal-header,
[color-scheme='dark'] #u-search .modal-body {
  background: var(--color-card) !important;
}
[color-scheme='dark'] #u-search .modal-body .modal-results .result:hover {
  background: var(--color-block) !important;
}
[color-scheme='dark'] .u-search-input:hover {
  background: var(--color-block) !important;
}
[color-scheme='dark'] .u-search-input:focus {
  background: var(--color-site-body) !important;
}
@media screen and (max-width: 500px) {
  [color-scheme='dark'] .l_header .m_search {
    background: var(--color-site-bg) !important;
  }
}
@font-face {
  font-family: 'UbuntuMono';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
@font-face {
  font-family: 'Varela Round';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
.l_header {
  position: fixed;
  z-index: 1000;
  top: 0;
  width: 100%;
  height: 64px;
  background: var(--color-card);
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.l_header.auto {
  transition: opacity 0.4s ease;
  -webkit-transition: opacity 0.4s ease;
  -khtml-transition: opacity 0.4s ease;
  -moz-transition: opacity 0.4s ease;
  -o-transition: opacity 0.4s ease;
  -ms-transition: opacity 0.4s ease;
  visibility: hidden;
}
.l_header.auto.show {
  opacity: 1 !important;
  -webkit-opacity: 1 !important;
  -moz-opacity: 1 !important;
  visibility: visible;
}
.l_header .container {
  margin-left: 16px;
  margin-right: 16px;
}
.l_header #wrapper {
  height: 100%;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.l_header #wrapper .nav-main,
.l_header #wrapper .nav-sub {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  justify-content: space-between;
  -webkit-justify-content: space-between;
  -khtml-justify-content: space-between;
  -moz-justify-content: space-between;
  -o-justify-content: space-between;
  -ms-justify-content: space-between;
  align-items: center;
}
.l_header #wrapper .nav-main {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.l_header #wrapper.sub .nav-main {
  transform: translateY(-64px);
  -webkit-transform: translateY(-64px);
  -khtml-transform: translateY(-64px);
  -moz-transform: translateY(-64px);
  -o-transform: translateY(-64px);
  -ms-transform: translateY(-64px);
}
.l_header #wrapper .nav-sub {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
  height: 64px;
  width: calc(100% - 2 * 16px);
  position: absolute;
}
.l_header #wrapper .nav-sub ::-webkit-scrollbar {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (min-width: 2048px) {
  .l_header #wrapper .nav-sub {
    max-width: 55vw;
    margin: auto;
  }
}
.l_header #wrapper.sub .nav-sub {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
}
.l_header #wrapper .title {
  position: relative;
  color: var(--color-text);
  padding-left: 24px;
  max-height: 64px;
}
.l_header #wrapper .nav-main .title {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-shrink: 0;
  line-height: 64px;
  padding: 0 24px;
  font-size: 1.25rem;
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
}
.l_header #wrapper .nav-main .title img {
  height: 64px;
}
.l_header .nav-sub {
  max-width: 1080px;
  margin: auto;
}
.l_header .nav-sub .title {
  font-weight: bold;
  font-family: Menlo, UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  line-height: 1.2;
  max-height: 64px;
  white-space: normal;
  flex-shrink: 1;
}
.l_header .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  line-height: 64px;
  align-items: center;
}
.l_header .switcher .s-toc {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (max-width: 768px) {
  .l_header .switcher .s-toc {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
  }
}
.l_header .switcher >li {
  height: 48px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  margin: 2px;
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li {
    margin: 0 1px;
    height: 48px;
  }
}
.l_header .switcher >li >a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  align-items: center;
  width: 48px;
  height: 48px;
  padding: 0.85em 1.1em;
  border-radius: 100px;
  -webkit-border-radius: 100px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  color: #3dd9b6;
}
.l_header .switcher >li >a:hover {
  border: none;
}
.l_header .switcher >li >a.active,
.l_header .switcher >li >a:active {
  border: none;
  background: var(--color-site-bg);
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li >a {
    width: 36px;
    height: 48px;
  }
}
.l_header .nav-sub .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
}
.l_header .m_search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  height: 64px;
  width: 240px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (max-width: 1024px) {
  .l_header .m_search {
    width: 44px;
    min-width: 44px;
  }
  .l_header .m_search input::placeholder {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
  }
  .l_header .m_search:hover {
    width: 240px;
  }
  .l_header .m_search:hover input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (min-width: 500px) {
  .l_header .m_search:hover .input {
    width: 100%;
  }
  .l_header .m_search:hover .input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search {
    min-width: 0;
  }
  .l_header .m_search input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.l_header .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  width: 100%;
  align-items: center;
}
.l_header .m_search .icon {
  position: absolute;
  width: 36px;
  left: 5px;
  color: var(--color-meta);
}
@media screen and (max-width: 500px) {
  .l_header .m_search .icon {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
.l_header .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding-top: 8px;
  padding-bottom: 8px;
  line-height: 1.3;
  width: 100%;
  color: var(--color-text);
  background: #fafafa;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  padding-left: 40px;
  font-size: 0.875rem;
  border-radius: 8px;
  -webkit-border-radius: 8px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (min-width: 500px) {
  .l_header .m_search .input:focus {
    box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
    -webkit-box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search .input {
    background: var(--color-block);
    padding-left: 8px;
    border: none;
  }
  .l_header .m_search .input:hover,
  .l_header .m_search .input:focus {
    border: none;
  }
}
@media (max-width: 500px) {
  .l_header .m_search {
    left: 0;
    width: 0;
    overflow: hidden;
    position: absolute;
    background: #fff;
    transition: all 0.28s ease;
    -webkit-transition: all 0.28s ease;
    -khtml-transition: all 0.28s ease;
    -moz-transition: all 0.28s ease;
    -o-transition: all 0.28s ease;
    -ms-transition: all 0.28s ease;
  }
  .l_header .m_search .input {
    border-radius: 32px;
    -webkit-border-radius: 32px;
    margin-left: 16px;
    padding-left: 16px;
  }
  .l_header.z_search-open .m_search {
    width: 100%;
  }
  .l_header.z_search-open .m_search .input {
    width: calc(100% - 120px);
  }
}
ul.m-pc >li>a {
  color: inherit;
  border-bottom: 2px solid transparent;
}
ul.m-pc >li>a:active,
ul.m-pc >li>a.active {
  border-bottom: 2px solid #3dd9b6;
}
ul.m-pc li:hover >ul.list-v,
ul.list-v li:hover >ul.list-v {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.nav-list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  align-items: stretch;
}
ul.nav-list-h>li {
  position: relative;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  height: 100%;
  line-height: 2.4;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
ul.nav-list-h>li >a {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 600;
}
ul.list-v {
  z-index: 1;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: absolute;
  background: var(--color-card);
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  margin-top: -6px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  padding: 8px 0;
}
ul.list-v.show {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.list-v hr {
  margin-top: 8px;
  margin-bottom: 8px;
}
ul.list-v >li {
  white-space: nowrap;
  word-break: keep-all;
}
ul.list-v >li.header {
  font-size: 0.78125rem;
  font-weight: bold;
  line-height: 2em;
  color: var(--color-meta);
  margin: 8px 16px 4px;
}
ul.list-v >li.header i {
  margin-right: 8px;
}
ul.list-v >li ul {
  margin-left: 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: -40px;
}
ul.list-v .aplayer-container {
  min-height: 64px;
  padding: 6px 16px;
}
ul.list-v >li>a {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  color: var(--color-list);
  font-size: 0.875rem;
  font-weight: bold;
  line-height: 36px;
  padding: 0 20px 0 16px;
  text-overflow: ellipsis;
  margin: 0 4px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
@media screen and (max-width: 1024px) {
  ul.list-v >li>a {
    line-height: 40px;
  }
}
ul.list-v >li>a >i {
  margin-right: 8px;
}
ul.list-v >li>a:active,
ul.list-v >li>a.active {
  color: var(--color-list-hl);
}
ul.list-v >li>a:hover {
  color: var(--color-list-hl);
  background: var(--color-site-bg);
}
.l_header .menu >ul>li>a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding: 0 8px;
}
.l_header .menu >ul>li>a >i {
  margin-right: 4px;
}
.l_header ul.nav-list-h>li {
  color: var(--color-list);
  line-height: 64px;
}
.l_header ul.nav-list-h>li >a {
  max-height: 64px;
  overflow: hidden;
  color: inherit;
}
.l_header ul.nav-list-h>li >a:active,
.l_header ul.nav-list-h>li >a.active {
  color: #3dd9b6;
}
.l_header ul.nav-list-h>li:hover>a {
  color: var(--color-list-hl);
}
.l_header ul.nav-list-h>li i.music {
  animation: rotate-effect 1.5s linear infinite;
  -webkit-animation: rotate-effect 1.5s linear infinite;
  -khtml-animation: rotate-effect 1.5s linear infinite;
  -moz-animation: rotate-effect 1.5s linear infinite;
  -o-animation: rotate-effect 1.5s linear infinite;
  -ms-animation: rotate-effect 1.5s linear infinite;
}
@-moz-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-webkit-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-o-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
.menu-phone li ul.list-v {
  right: calc(100% - 0.5 * 16px);
}
.menu-phone li ul.list-v ul {
  right: calc(100% - 0.5 * 16px);
}
#wrapper {
  max-width: 1080px;
  margin: auto;
}
@media screen and (min-width: 2048px) {
  #wrapper {
    max-width: 55vw;
  }
}
#wrapper .menu {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
  margin: 0 16px 0 0;
}
#wrapper .menu .list-v ul {
  left: calc(100% - 0.5 * 16px);
}
.menu-phone {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: 16px;
  right: 8px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.menu-phone ul {
  right: calc(100% - 0.5 * 16px);
}
@media screen and (max-width: 500px) {
  .menu-phone {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: block;
  }
}
.l_header {
  max-width: 65vw;
  left: calc((100% - 65vw) * 0.5);
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}
@media screen and (max-width: 2048px) {
  .l_header {
    max-width: 1112px;
    left: calc((100% - 1112px) * 0.5);
  }
}
@media screen and (max-width: 1112px) {
  .l_header {
    left: 0;
    border-radius: 0;
    -webkit-border-radius: 0;
    max-width: 100%;
  }
}
@media screen and (max-width: 500px) {
  .l_header .container {
    margin-left: 0;
    margin-right: 0;
  }
  .l_header #wrapper .nav-main .title {
    padding-left: 16px;
    padding-right: 16px;
  }
  .l_header #wrapper .nav-sub {
    width: 100%;
  }
  .l_header #wrapper .nav-sub .title {
    overflow-y: scroll;
    margin-top: 2px;
    padding: 8px 16px;
  }
  .l_header #wrapper .switcher {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
    margin-right: 8px;
  }
  .l_header .menu {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
@media screen and (max-width: 500px) {
  .list-v li {
    max-width: 270px;
  }
}
#u-search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 60px 20px;
  z-index: 1001;
}
@media screen and (max-width: 680px) {
  #u-search {
    padding: 0px;
  }
}
@media screen and (prefers-color-scheme: dark) and (max-width: 500px) {
  .l_header .m_search {
    background: var(--color-site-bg) !important;
  }
}

  </style>
  <link rel="stylesheet" href="/css/style.1154b99c.css" media="print" onload="this.media='all';this.onload=null">
  <noscript><link rel="stylesheet" href="/css/style.1154b99c.css"></noscript>
    <script>
      let userColorScheme=localStorage.getItem("color-scheme")
      if(userColorScheme){
        document.documentElement.setAttribute("color-scheme", userColorScheme);
      }
    </script>
  
<script>
if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode))
    document.write(
	'<style>'+
		'html{'+
			'overflow-x: hidden !important;'+
			'overflow-y: hidden !important;'+
		'}'+
		'.kill-ie{'+
			'text-align:center;'+
			'height: 100%;'+
			'margin-top: 15%;'+
			'margin-bottom: 5500%;'+
		'}'+
    '.kill-t{'+
      'font-size: 2rem;'+
    '}'+
    '.kill-c{'+
      'font-size: 1.2rem;'+
    '}'+
		'#l_header,#l_body{'+
			'display: none;'+
		'}'+
	'</style>'+
    '<div class="kill-ie">'+
        `<span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br/>`+
        `<span class="kill-c">微软已经于2016年终止了对 Internet Explorer (IE) 10 及更早版本的支持，<br/>继续使用存在极大的安全隐患，请使用当代主流的浏览器进行访问。</span><br/>`+
        `<a target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/WindowsForBusiness/End-of-IE-support"><strong>了解详情 ></strong></a>`+
    '</div>');
</script>


<noscript>
	<style>
		html{
			overflow-x: hidden !important;
			overflow-y: hidden !important;
		}
		.kill-noscript{
			text-align:center;
			height: 100%;
			margin-top: 15%;
			margin-bottom: 5500%;
		}
    .kill-t{
      font-size: 2rem;
    }
    .kill-c{
      font-size: 1.2rem;
    }
		#l_header,#l_body{
			display: none;
		}
	</style>
    <div class="kill-noscript">
        <span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br/>
        <span class="kill-c">本页面需要浏览器支持（启用）JavaScript</span><br/>
        <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a>
    </div>
</noscript>


  <script>
  /************这个文件存放不需要重载的全局变量和全局函数*********/
  window.volantis = {}; // volantis 全局变量
  volantis.debug = false; // 开启调试模式
  volantis.dom = {}; // 页面Dom see: /source/js/app.js etc.

  volantis.GLOBAL_CONFIG ={
    debug: false,
    cdn: {"js":{"app":"/js/app.af2d54c8.js","parallax":"/js/plugins/parallax.8bf0ab10.js","rightMenu":"/js/plugins/rightMenu.d9437285.js","rightMenus":"/js/plugins/rightMenus.cd02aa19.js","sites":"/js/plugins/tags/sites.76bf19b8.js","friends":"/js/plugins/tags/friends.f372da57.js","contributors":"/js/plugins/tags/contributors.aec80453.js","search":"/js/search/hexo.0e52f222.js"},"css":{"style":"/css/style.1154b99c.css"}},
    default: {"avatar":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg","link":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/link/8f277b4ee0ecd.svg","cover":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg","image":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/image/2659360.svg"},
    lastupdate: new Date(1677898882176),
    sidebar: {
      for_page: ["blogger","category","tagcloud"],
      for_post: ["toc"],
      webinfo: {
        lastupd: {
          enable: true,
          friendlyShow: true
        },
        runtime: {
          data: "2020/01/01",
          unit: "天"
        }
      }
    },
    plugins: {
      message: {"enable":true,"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/css/iziToast.min.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/js/iziToast.min.js","icon":{"default":"fa-solid fa-info-circle light-blue","quection":"fa-solid fa-question-circle light-blue"},"time":{"default":5000,"quection":20000},"position":"topRight","transitionIn":"bounceInLeft","transitionOut":"fadeOutRight","titleColor":"var(--color-text)","messageColor":"var(--color-text)","backgroundColor":"var(--color-card)","zindex":2147483647,"copyright":{"enable":true,"title":"知识共享许可协议","message":"请遵守 CC BY-NC-SA 4.0 协议。","icon":"far fa-copyright light-blue"},"aplayer":{"enable":true,"play":"fa-solid fa-play","pause":"fa-solid fa-pause"},"rightmenu":{"enable":true,"notice":true}},
      fancybox: {"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.umd.js"},
      aplayer: {
        id: 3175833810,
        enable:null
      },
      rightmenu: {
        faicon: "fa",
        layout: ["home","hr","help","examples","contributors","hr","source_docs","source_theme","hr","print","darkmode","reading","music"],
        music_alwaysShow: true,
        customPicUrl: {"enable":false,"old":null,"new":null}
      },
      rightmenus: {"enable":true,"order":["plugins.navigation","hr","plugins.inputBox","plugins.seletctText","plugins.elementCheck","plugins.elementImage","menus.link","hr","menus.darkMode","plugins.articlePage","music"],"options":{"iconPrefix":"fa-solid","articleShowLink":false,"musicAlwaysShow":false},"plugins":{"navigation":[{"id":"left","name":"转到上一页","icon":"fa-solid fa-arrow-left","event":"history.back()","group":"navigation"},{"id":"right","name":"转到下一页","icon":"fa-solid fa-arrow-right","event":"history.forward()","group":"navigation"},{"id":"redo","name":"刷新当前页面","icon":"fa-solid fa-redo","event":"window.location.reload()","group":"navigation"},{"id":"up","name":"回到顶部","icon":"fa-solid fa-arrow-up","event":"VolantisApp.scrolltoElement(volantis.dom.bodyAnchor)","group":"navigation"}],"inputBox":[{"id":"copyPaste","name":"粘贴文本","icon":"fa-solid fa-paste","event":"copyPaste","group":"inputBox"},{"id":"copyAll","name":"全选文本","icon":"fa-solid fa-object-ungroup","event":"copyAll","group":"inputBox"},{"id":"copyCut","name":"剪切文本","icon":"fa-solid fa-cut","event":"copyCut","group":"inputBox"}],"seletctText":[{"id":"copyText","name":"复制文本","icon":"fa-solid fa-copy","event":"copyText","group":"seletctText"},{"id":"searchWord","name":"站内搜索","icon":"fa-solid fa-search","event":"OpenSearch(__text__)","group":"seletctText"},{"id":"bingSearch","name":"必应搜索","icon":"fa-solid fa-search","event":"window.open(`https://cn.bing.com/search?q=${__text__}`)","group":"seletctText"}],"elementCheck":[{"id":"openTab","name":"新标签页打开","icon":"fa-solid fa-external-link-square-alt","event":"window.open(__link__)","group":"elementCheck"},{"id":"copyLink","name":"复制链接地址","icon":"fa-solid fa-link","event":"copyLink","group":"elementCheck"}],"elementImage":[{"id":"copyImg","name":"复制图片","icon":"fa-solid fa-image","event":"copyImg","group":"elementImage"},{"id":"googleImg","name":"谷歌识图","icon":"fa-solid fa-images","event":"window.open(`https://www.google.com.hk/searchbyimage?image_url=${__link__}`)","group":"elementImage"}],"articlePage":[{"id":"printMode","name":"打印页面","icon":"fa-solid fa-print","event":"printMode","group":"articlePage"},{"id":"readMode","name":"阅读模式","icon":"fa-solid fa-book-open","event":"readMode","group":"articlePage"}]},"menus":{"link":[{"id":"help","name":"常见问题","icon":"fa-solid fa-question","link":"https://volantis.js.org/faqs/","group":"link"},{"id":"examples","name":"示例博客","icon":"fa-solid fa-rss","link":"https://volantis.js.org/examples/","group":"link"},{"id":"contributors","name":"加入社区","icon":"fa-solid fa-fan","link":"https://volantis.js.org/contributors/","group":"link"},"hr",{"id":"source_docs","name":"本站源码","icon":"fa-solid fa-code-branch","link":"https://github.com/volantis-x/volantis-docs/","group":"link"},{"id":"source_theme","name":"主题源码","icon":"fa-solid fa-code-branch","link":"https://github.com/volantis-x/hexo-theme-volantis/","group":"link"}],"darkMode":[{"id":"darkMode","name":"暗黑模式","icon":"fa-solid fa-moon","event":"volantis.dark.toggle()","group":"darkMode"}]}}
    }
  }

  /******************** volantis.EventListener ********************************/
  // 事件监听器 see: /source/js/app.js
  volantis.EventListener = {}
  // 这里存放pjax切换页面时将被移除的事件监听器
  volantis.EventListener.list = []
  //构造方法
  function volantisEventListener(type, f, ele) {
    this.type = type
    this.f = f
    this.ele = ele
  }
  // 移除事件监听器
  volantis.EventListener.remove = () => {
    volantis.EventListener.list.forEach(function (i) {
      i.ele.removeEventListener(i.type, i.f, false)
    })
    volantis.EventListener.list = []
  }
  /******************** volantis.dom.$ ********************************/
  // 注：这里没有选择器，也没有forEach一次只处理一个dom，这里重新封装主题常用的dom方法，返回的是dom对象，对象包含了以下方法，同时保留dom的原生API
  function volantisDom(ele) {
    if (!ele) ele = document.createElement("div")
    this.ele = ele;
    // ==============================================================
    this.ele.find = (c) => {
      let q = this.ele.querySelector(c)
      if (q)
        return new volantisDom(q)
    }
    // ==============================================================
    this.ele.hasClass = (c) => {
      return this.ele.className.match(new RegExp('(\\s|^)' + c + '(\\s|$)'));
    }
    this.ele.addClass = (c) => {
      this.ele.classList.add(c);
      return this.ele
    }
    this.ele.removeClass = (c) => {
      this.ele.classList.remove(c);
      return this.ele
    }
    this.ele.toggleClass = (c) => {
      if (this.ele.hasClass(c)) {
        this.ele.removeClass(c)
      } else {
        this.ele.addClass(c)
      }
      return this.ele
    }
    // ==============================================================
    // 参数 r 为 true 表示pjax切换页面时事件监听器将被移除，false不移除
    this.ele.on = (c, f, r = 1) => {
      this.ele.addEventListener(c, f, false)
      if (r) {
        volantis.EventListener.list.push(new volantisEventListener(c, f, this.ele))
      }
      return this.ele
    }
    this.ele.click = (f, r) => {
      this.ele.on("click", f, r)
      return this.ele
    }
    this.ele.scroll = (f, r) => {
      this.ele.on("scroll", f, r)
      return this.ele
    }
    // ==============================================================
    this.ele.html = (c) => {
      // if(c=== undefined){
      //   return this.ele.innerHTML
      // }else{
      this.ele.innerHTML = c
      return this.ele
      // }
    }
    // ==============================================================
    this.ele.hide = (c) => {
      this.ele.style.display = "none"
      return this.ele
    }
    this.ele.show = (c) => {
      this.ele.style.display = "block"
      return this.ele
    }
    // ==============================================================
    return this.ele
  }
  volantis.dom.$ = (ele) => {
    return !!ele ? new volantisDom(ele) : null;
  }
  /******************** RunItem ********************************/
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = ()=>{
          volantis.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) =>{
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index,1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }
  /******************** Pjax ********************************/
  // /layout/_plugins/pjax/index.ejs
  // volantis.pjax.send(callBack[,"callBackName"]) 传入pjax:send回调函数
  // volantis.pjax.push(callBack[,"callBackName"]) 传入pjax:complete回调函数
  // volantis.pjax.error(callBack[,"callBackName"]) 传入pjax:error回调函数
  volantis.pjax = {};
  volantis.pjax.method = {
    complete: new RunItem(),
    error: new RunItem(),
    send: new RunItem(),
  };
  volantis.pjax = Object.assign(volantis.pjax, {
    push: volantis.pjax.method.complete.push,
    error: volantis.pjax.method.error.push,
    send: volantis.pjax.method.send.push,
  });
  /******************** RightMenu ********************************/
  // volantis.rightmenu.handle(callBack[,"callBackName"]) 外部菜单项控制
  // 可在 volantis.mouseEvent 处获取右键事件
  volantis.rightmenu = {};
  volantis.rightmenu.method = {
    handle: new RunItem(),
  }
  volantis.rightmenu = Object.assign(volantis.rightmenu, {
    handle: volantis.rightmenu.method.handle.push,
  });
  /********************  Dark Mode  ********************************/
  // /layout/_partial/scripts/darkmode.ejs
  // volantis.dark.mode 当前模式 dark or light
  // volantis.dark.toggle() 暗黑模式触发器
  // volantis.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  volantis.dark = {};
  volantis.dark.method = {
    toggle: new RunItem(),
  };
  volantis.dark = Object.assign(volantis.dark, {
    push: volantis.dark.method.toggle.push,
  });
  /********************  Message  ********************************/
  // VolantisApp.message
  /********************  isMobile  ********************************/
  // /source/js/app.js
  // volantis.isMobile
  // volantis.isMobileOld
  /********************脚本动态加载函数********************************/
  // volantis.js(src, cb)  cb 可以传入onload回调函数 或者 JSON对象 例如: volantis.js("src", ()=>{}) 或 volantis.js("src", {defer:true,onload:()=>{}})
  // volantis.css(src)

  // 返回Promise对象，如下方法同步加载资源，这利于处理文件资源之间的依赖关系，例如：APlayer 需要在 MetingJS 之前加载
  // (async () => {
  //     await volantis.js("...theme.plugins.aplayer.js.aplayer...")
  //     await volantis.js("...theme.plugins.aplayer.js.meting...")
  // })();

  // 已经加入了setTimeout
  volantis.js = (src, cb) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("head")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }
  volantis.css = (src) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  }
  /********************按需加载的插件********************************/
  // volantis.import.jQuery().then(()=>{})
  volantis.import = {
    jQuery: () => {
      if (typeof jQuery == "undefined") {
        return volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/jquery/dist/jquery.min.js")
      } else {
        return new Promise(resolve => {
          resolve()
        });
      }
    }
  }
  /********************** requestAnimationFrame ********************************/
  // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
  // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
  volantis.requestAnimationFrame = (fn)=>{
    if (!window.requestAnimationFrame) {
      window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
    }
    window.requestAnimationFrame(fn)
  }
  /************************ layoutHelper *****************************************/
  volantis.layoutHelper = (helper, html, opt)=>{
    opt = Object.assign({clean:false, pjax:true}, opt)
    function myhelper(helper, html, clean) {
      volantis.tempDiv = document.createElement("div");
      volantis.tempDiv.innerHTML = html;
      let layoutHelper = document.querySelector("#layoutHelper-"+helper)
      if (layoutHelper) {
        if (clean) {
          layoutHelper.innerHTML = ""
        }
        layoutHelper.append(volantis.tempDiv);
      }
    }
    myhelper(helper, html, opt.clean)
    if (opt.pjax) {
      volantis.pjax.push(()=>{
        myhelper(helper, html, opt.clean)
      },"layoutHelper-"+helper)
    }
  }
  /****************************** 滚动事件处理 ****************************************/
  volantis.scroll = {
    engine: new RunItem(),
    unengine: new RunItem(),
  };
  volantis.scroll = Object.assign(volantis.scroll, {
    push: volantis.scroll.engine.push,
  });
  // 滚动条距离顶部的距离
  volantis.scroll.getScrollTop = () =>{
    let scrollPos;
    if (window.pageYOffset) {
      scrollPos = window.pageYOffset;
    } else if (document.compatMode && document.compatMode != 'BackCompat') {
      scrollPos = document.documentElement.scrollTop;
    } else if (document.body) {
      scrollPos = document.body.scrollTop;
    }
    return scrollPos;
  }
  // 使用 requestAnimationFrame 处理滚动事件
  // `volantis.scroll.del` 中存储了一个数值, 该数值检测一定时间间隔内滚动条滚动的位移, 数值的检测频率是浏览器的刷新频率. 数值为正数时, 表示向下滚动. 数值为负数时, 表示向上滚动.
  volantis.scroll.handleScrollEvents = () => {
    volantis.scroll.lastScrollTop = volantis.scroll.getScrollTop()
    function loop() {
      const scrollTop = volantis.scroll.getScrollTop();
      if (volantis.scroll.lastScrollTop !== scrollTop) {
        volantis.scroll.del = scrollTop - volantis.scroll.lastScrollTop;
        volantis.scroll.lastScrollTop = scrollTop;
        // if (volantis.scroll.del > 0) {
        //   console.log("向下滚动");
        // } else {
        //   console.log("向上滚动");
        // }
        // 注销过期的unengine未滚动事件
        volantis.scroll.unengine.list=[]
        volantis.scroll.engine.start();
      }else{
        volantis.scroll.unengine.start();
      }
      volantis.requestAnimationFrame(loop)
    }
    volantis.requestAnimationFrame(loop)
  }
  volantis.scroll.handleScrollEvents()
  // 触发页面滚动至目标元素位置
  volantis.scroll.to = (ele, option = {}) =>{
    // 默认配置
    opt = {
      top: ele.getBoundingClientRect().top + document.documentElement.scrollTop,
      behavior: "smooth"
    }
    // 定义配置
    if ("top" in option) {
      opt.top = option.top
    }
    if ("behavior" in option) {
      opt.behavior = option.behavior
    }
    if ("addTop" in option) {
      opt.top += option.addTop
    }
    if (!("observerDic" in option)) {
      option.observerDic = 100
    }
    // 滚动
    window.scrollTo(opt);
    // 监视器
    // 监视并矫正元素滚动到指定位置
    // 用于处理 lazyload 引起的 cls 导致的定位失败问题
    // option.observer = false
    if (option.observer) {
      setTimeout(()=>{
        volantis.scroll.unengine.push(()=>{
          let me = ele.getBoundingClientRect().top
          if(!(me >= -option.observerDic && me <= option.observerDic)){
            volantis.scroll.to(ele, option)
          }
          volantis.scroll.unengine.remove("unengineObserver")
        },"unengineObserver")
      },1000)
    }
  }
  /********************** Content Visibility ********************************/
  // 见 source/css/first.styl 如果遇到任何问题 删除 .post-story 即可
  // 一个元素被声明 content-visibility 属性后 如果元素不在 viewport 中 浏览器不会计算其后代元素样式和属性 从而节省 Style & Layout 耗时
  // content-visibility 的副作用: 锚点失效 等等(实验初期 暂不明确), 使用此方法清除样式
  volantis.cleanContentVisibility = ()=>{
    if (document.querySelector(".post-story")) {
      console.log("cleanContentVisibility");
      document.querySelectorAll(".post-story").forEach(e=>{
        e.classList.remove("post-story")
      })
    }
  }
  /******************************************************************************/
  /******************************************************************************/
  /******************************************************************************/
  //图像加载出错时的处理
  function errorImgAvatar(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg";
    img.onerror = null;
  }
  function errorImgCover(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg";
    img.onerror = null;
  }
  /******************************************************************************/
</script>

  <!-- import head_end begin -->
  <!-- import head_end end -->
  <!-- Custom Files headEnd begin-->
  
  <!-- Custom Files headEnd end--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
  <body itemscope itemtype="http://schema.org/WebPage">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- import body_begin begin-->
    <!-- import body_begin end-->
    <!-- Custom Files bodyBegin begin-->
    
    <!-- Custom Files bodyBegin end-->
    <header itemscope itemtype="http://schema.org/WPHeader" id="l_header" class="l_header auto shadow floatable blur show" style='opacity: 0' >
  <div class='container'>
  <div id='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
        <li><a id="s-comment" class="fa-solid fa-comments fa-fw" target="_self"  href="/" onclick="return false;" title="comment"></a></li>
        
          <li><a id="s-toc" class="s-toc fa-solid fa-list fa-fw" target="_self"  href="/" onclick="return false;" title="toc"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
            <i class='/image/avatar.png'></i>
          
          
            Adversarr's Blog
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h m-pc'>
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="博客"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/categories/" title="分类"
                  
                  
                  
                    active-action="action-categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="标签"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="归档"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/about/" title="关于"
                  
                  
                  
                    active-action="action-about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>
      
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fa-solid fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="也许你在找些有意思的..." />
        </form>
      </div>
      

			<ul class='switcher nav-list-h m-phone'>
				
					<li><a class="s-search fa-solid fa-search fa-fw" target="_self" href="/" onclick="return false;" title="search"></a></li>
				
				<li>
          <a class="s-menu fa-solid fa-bars fa-fw" target="_self" href="/" onclick="return false;" title="menu"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="博客"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/categories/" title="分类"
                  
                  
                  
                    active-action="action-categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="标签"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="归档"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/about/" title="关于"
                  
                  
                  
                    active-action="action-about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>

      <!-- Custom Files header begin -->
      
      <!-- Custom Files header end -->
		</div>
	</div>
  </div>
</header>

    <div id="l_body">
      <div id="l_cover">
  
    
      <!-- see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs -->
      <div id="none" class='cover-wrapper post dock' style="display: none;">
        
  <div class='cover-bg lazyload placeholder' data-bg="https://api.dujin.org/bing/1920.php"></div>

<div class='cover-body'>
  <div class='top'>
    
    
      <p class="title">Welcome to Adversarrs Blog!</p>
    
    
      <p class="subtitle">Je pense, donc je suis</p>
    
  </div>
  <div class='bottom'>
    <div class='menu navigation'>
      <div class='list-h'>
        
          
            <a href="/categories/"
              
              
              active-action="action-categories">
              <img src='https://fastly.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f5c3.svg'><p>分类</p>
            </a>
          
            <a href="/tags/"
              
              
              active-action="action-tags">
              <img src='https://fastly.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f396.svg'><p>标签</p>
            </a>
          
            <a href="/about/"
              
              
              active-action="action-about">
              <img src='https://fastly.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f516.svg'><p>关于</p>
            </a>
          
            <a href="/archives/"
              
              
              active-action="action-archives">
              <img src='https://fastly.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4f0.svg'><p>归档</p>
            </a>
          
            <a target="_blank" rel="noopener" href="https://github.com/adversarr"
              
              
              active-action="action-https:githubcomadversarr">
              <img src='https://fastly.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f9ec.svg'><p>Github</p>
            </a>
          
        
      </div>
    </div>
  </div>
</div>

        <div id="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
      </div>
    
  
</div>

      <div id="safearea">
        <div class="body-wrapper">
          
<div id="l_main" class=''>
  <article itemscope itemtype="http://schema.org/Article" class="article post white-box reveal md shadow floatable blur article-type-post" id="post" itemscope itemprop="blogPost">
  <link itemprop="mainEntityOfPage" href="http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/">
  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Adversarr's Blog">
  </span>
  <span hidden itemprop="post" itemscope itemtype="http://schema.org/Post">
    <meta itemprop="name" content="Adversarr's Blog">
    <meta itemprop="description" content="Je pense, donc je suis">
  </span>
  


  
    <span hidden>
      <meta itemprop="image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
    </span>
  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title" itemprop="name headline">
        Siggraph 2021 course - An Introduction to Physics-based Animation
      </h1>
      <div class='new-meta-box'>
        
          
            
<div class='new-meta-item author' itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a itemprop="url" class='author' href="/" rel="nofollow">
    <img itemprop="image" src="/image/avatar.png" class="lazyload" data-srcset="/image/avatar.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
    <p itemprop="name">Adversarr</p>
  </a>
</div>

          
        
          
            

          
        
          
            <div class="new-meta-item date" itemprop="dateCreated datePublished" datetime="2022-12-04T23:15:08+08:00">
  <a class='notlink'>
    <i class="fa-solid fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2022年12月4日</p>
  </a>
</div>

          
        
          
            


<div class="new-meta-item browse">
  <a class='notlink'>
    <p>
      <i class="fa-solid fa-eye fa-fw" aria-hidden="true"></i>
      
      <span>次浏览</span>
    </p>
  </a>
</div>


          
        
        <!-- Custom Files topMeta begin-->
        
        <!-- Custom Files topMeta end-->
      </div>
    
  </div>


  <div id="layoutHelper-page-plugins"></div>
  <div id="post-body" itemprop="articleBody">
    <p>Siggraph 2021 course notes.</p>
<p>See more in Siyuan.</p>
<span id="more"></span>
<hr />
<ul>
<li>Title: Introduction to PBA 笔记</li>
<li>Tags: #Tutorial#, #PhysicalSimulation#, #SiggraphCourse#</li>
</ul>
<hr />
<blockquote>
<p><a href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf">An
Introduction to Physics-based Animation</a></p>
</blockquote>
<h2 id="a-simple-start-particle-dynamics">A simple start: Particle
Dynamics</h2>
<h3 id="passive-particle-in-velocity-field">Passive Particle in Velocity
Field</h3>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=5">IPBA-optimized.pdf
- p5 - IPBA-optimized-P5-20230128114412</a></p>
<img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P5-20230128114412-20230128114414-famhayj.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P5-20230128114412-20230128114414-famhayj.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload">
<p>问题：给定速度场<span class="math inline">\(v(x,
t)\)</span>，求运动</p>
<p>本质上：I.V.P（初值问题）</p>
<p><span class="math display">\[
\begin{aligned}
x_p(0) = x_0 \\
\dot{x}_p = v(x_p, t)
\end{aligned}
\]</span></p>
<p>常微分方程 -- 只有 <span class="math inline">\(t\)</span>。且是一阶
ODE。用有限差分法求。具体从解析到离散的推导为：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=5">IPBA-optimized.pdf
- p5 - IPBA-optimized-P5-20230128114500</a></p>
<img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P5-20230128114500-20230128114502-ls19xtk.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P5-20230128114500-20230128114502-ls19xtk.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload">
<h3 id="particle-with-mass">Particle with mass</h3>
<p>如果给定的不是速度场，而是力场，可以用牛顿第二定律来进行计算：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=6">IPBA-optimized.pdf
- p6 - IPBA-optimized-P6-20230128114553</a></p>
<img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P6-20230128114553-20230128114553-g0pl6qk.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P6-20230128114553-20230128114553-g0pl6qk.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload">
<p><span class="math display">\[
\begin{aligned}
x_p(0) = x_0 \\
\ddot{x}_p = f / m
\end{aligned}
\]</span></p>
<p>或者替换为两个一阶ODE耦合的形式：</p>
<p><span class="math display">\[
\begin{aligned}
x_p(0) = x_0 \\
\dot{x}_p = v_p
\dot{v}_p = f/m
\end{aligned}
\]</span></p>
<p>最简单的，我们可以直接用差分代替微分，实现Symplectic
Euler方法。（以及显式欧拉）</p>
<blockquote>
<p>区别于半隐式欧拉。</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Particle</span> &#123;</span><br><span class="line">  mass</span><br><span class="line">  position</span><br><span class="line">  velocity</span><br><span class="line">  force_accumulator</span><br><span class="line">  ...</span><br><span class="line">  (i.e. color, size, age, type)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=6">IPBA-optimized.pdf
- p6 - Particle structure would typically store, at a minimum: mass,
position, velocity, and a force accumulator.</a></p>
</blockquote>
<blockquote>
<p>Question: use field (SoA + ECS)</p>
</blockquote>
<h3 id="mass-spring-system">Mass Spring System</h3>
<p>System = Particle + Constraint</p>
<p><span class="math display">\[
f_p = k(\| x_q - x_p \|/ r - 1) (x_q - x_p) / \| x_q - x_p \|
\]</span></p>
<p>两个弹簧节点之间的相互作用力可以如上定义。算法实现如下：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=8">IPBA-optimized.pdf
- p8 - IPBA-optimized-P8-20230128114851</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P8-20230128114851-20230128114851-2mt17ny.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P8-20230128114851-20230128114851-2mt17ny.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<div class="story post-story"><h2 id="mathematical-models">Mathematical Models</h2>
<blockquote>
<p>Continuum Mechanics: Assume the underlying materials are
continuous.</p>
</blockquote>
<h3 id="physics-law">Physics Law</h3>
<p>主要是两大部分：</p>
<ol type="1">
<li>牛顿力学 -- 第一定律、第二定律</li>
<li>分析力学(变分原理等)</li>
</ol>
<h4 id="ipba-optimized.pdf---p8---newtons-laws-of-motion."><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=8">IPBA-optimized.pdf
- p8 - Newton’s Laws of Motion.</a></h4>
<blockquote>
<p>1, 2, 3 定律</p>
</blockquote>
<ol type="1">
<li><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=8">IPBA-optimized.pdf
- p8 - a body remains at rest or moves with a constant velocity unless
acted upon by a force</a></li>
<li><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=8">IPBA-optimized.pdf
- p8 - Newton’s famous second law, 𝐟 = 𝑚𝐚,</a></li>
<li><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=9">IPBA-optimized.pdf
- p9 - Newton’s third law states that for every action, there is an
equal and opposite reaction. Specifically, in an interaction between two
particles or bodies, if body A applies force 𝐟 to body B, then body B
applies force −𝐟 to body A.</a></li>
</ol>
<h4
id="质量守恒动量守恒能量守恒-ipba-optimized.pdf---p10---conservation-of-mass-momentum-energy">质量守恒、动量守恒、能量守恒
<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=10">IPBA-optimized.pdf
- p10 - Conservation of Mass, Momentum, Energy</a></h4>
<p>守恒视角下，牛顿定律：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=10">IPBA-optimized.pdf
- p10 - IPBA-optimized-P10-20230128154753</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P10-20230128154753-20230128154755-ehci3f4.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P10-20230128154753-20230128154755-ehci3f4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=11">IPBA-optimized.pdf
- p11 - Conservation laws for
continua.</a>：对于连续介质，有质量守恒给出了如下公式</p>
<p><span class="math display">\[
\frac{d}{dt} \int_\Omega \rho dV = - \oint _{\partial \Omega} \rho v(x,
t) \cdot n(x) dS
\]</span></p>
<p>利用散度定理，局部的有：</p>
<p><span class="math display">\[
\frac{\partial \rho}{\partial t} + \nabla \cdot (\rho v) dV = 0
\]</span></p>
<h3 id="materials">Materials</h3>
<h4 id="ipba-optimized.pdf---p12---rigid-bodies"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=12">IPBA-optimized.pdf
- p12 - Rigid Bodies</a></h4>
<h5 id="dof-模型">6DoF 模型</h5>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=13">IPBA-optimized.pdf
- p13 - IPBA-optimized-P13-20230128175401</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P13-20230128175401-20230128175403-2c2hb7d.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P13-20230128175401-20230128175403-2c2hb7d.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>一个刚体只有6dof，分为Object Space 和 World Space</p>
<ol type="1">
<li>质心位置<span class="math inline">\(\mathbf x(t)\)</span></li>
<li>三维旋转<span class="math inline">\(\mathbf r(t)\)</span></li>
<li>质心计算：质量加权的平均位置<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=12">IPBA-optimized.pdf
- p12 - IPBA-optimized-P12-20230128175004</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P12-20230128175004-20230128175007-tkts5k7.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P12-20230128175004-20230128175007-tkts5k7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></li>
</ol>
<p>计算刚体上的点的世界坐标： <a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=13">IPBA-optimized.pdf
- p13 - IPBA-optimized-P13-20230129095515</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P13-20230129095515-20230129095517-q2bn9cu.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P13-20230129095515-20230129095517-q2bn9cu.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>通过上式对时间求微分，得到（刚体上某点的）速度方程：</p>
<p><span class="math display">\[
v(t) = \dot{x}(t) + \dot{R} (t) r_0
\]</span></p>
<h5
id="线速度角速度ipba-optimized.pdf---p13---linear-and-angular-velocity">线速度、角速度<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=13">IPBA-optimized.pdf
- p13 - Linear and Angular Velocity</a></h5>
<p>线速度：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=13">IPBA-optimized.pdf
- p13 - 𝐱(𝑡), is referred as the rigid body linear velocity</a></p>
<p>Euler 旋转定理：任意旋转是沿某轴进行的。</p>
<p><span class="math display">\[
\dot{R} (t) r_0 = \omega(t) \times r(t)
\]</span></p>
<p><span class="math inline">\(\omega(t)\)</span> 称为角速度。</p>
<p><strong>动量(Linear Momentum)</strong>：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=14">IPBA-optimized.pdf
- p14 - Linear Momentum.</a></p>
<p><span class="math display">\[
P(t) = \sum_{i=1}^{N} m_i v_i(t) = \underline{
\left(\sum_{i = 1}^N  m_i\right) \dot{x}(t)} + \omega(t)
\times\sum_{i=1}^N m_i r_i(t)
\]</span></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=15">IPBA-optimized.pdf
- p15 - IPBA-optimized-P15-20230129111005</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P15-20230129111005-20230129111007-mfrq9hb.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P15-20230129111005-20230129111007-mfrq9hb.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><strong>角动量(Angular Momentum)</strong>:<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=15">IPBA-optimized.pdf
- p15 - Angular Momentum.</a></p>
<p><span class="math display">\[
\begin{aligned}
L(t)&amp; = \sum_{i = 1}^{N} m_i r_i \times(\dot{x}(t) + \omega(t)
\times r_i(t))
\\
&amp;= \sum_{i = 1}^N m_i r_i(t)\times (\omega(t)\times r_i(t))
\end{aligned}
\]</span></p>
<p>因为其中的<span class="math inline">\(\omega\)</span>不依赖于<span
class="math inline">\(i\)</span>，交换叉乘顺序并定义：</p>
<p><span class="math display">\[
r \times \omega = r^* \omega =
\left(\begin{matrix}
0 &amp; -r_z &amp; r_y\\
r_z &amp; 0 &amp; -r_x\\
-r_y &amp; r_x &amp; 0
\end{matrix}\right) \omega
\]</span></p>
<p>所以有：</p>
<p><span class="math display">\[
\begin{aligned}
L(t)&amp; = (\sum_i m_i r_i^{*} r_i^{*T}) \omega(t)\\
&amp;=I(t) \omega (t)
\end{aligned}
\]</span></p>
<p>其中的<span class="math inline">\(I(t)\)</span>通过下式计算：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=16">IPBA-optimized.pdf
- p16 - IPBA-optimized-P16-20230129112855</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P16-20230129112855-20230129112855-188q80d.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P16-20230129112855-20230129112855-188q80d.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><strong>Force and Torque</strong></p>
<p><span class="math display">\[
\frac{d}{dt} \left(P;L\right) = \left(f; \tau\right)
\]</span></p>
<p>其中<span class="math inline">\(\tau = r \times f\)</span></p>
<p>Summary: <a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=16">IPBA-optimized.pdf
- p16 - IPBA-optimized-P16-20230129113036</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P16-20230129113036-20230129113038-3ry5prx.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P16-20230129113036-20230129113038-3ry5prx.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h3 id="soft-bodies">Soft Bodies</h3>
<blockquote>
<p>Central: deformation gradient</p>
</blockquote>
<p><span class="math display">\[
K(d) + D(\dot{d}) + M\ddot{d} = f_{ext}
\]</span></p>
<p>其中</p>
<ol type="1">
<li><span class="math inline">\(d\)</span> 是位移（指形变函数）</li>
<li><span class="math inline">\(K\)</span>表示弹性力（内部）→
刚度矩阵</li>
<li><span class="math inline">\(D\)</span>表示衰减力</li>
<li><span class="math inline">\(M\)</span>是质量矩阵。</li>
</ol>
<p>形变梯度的引入：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=17">IPBA-optimized.pdf
- p17 - Deformation Gradient</a></p>
<p><span class="math inline">\(u\)</span> 是 Rest-Space，<span
class="math inline">\(x\)</span> 是 World-Space，最简单的情况是</p>
<p><span class="math display">\[
x(u) = x(u_0) + A(u - u_0)
\]</span></p>
<p><span class="math inline">\(A\)</span>
是任意矩阵。如果是更复杂的情况，可以局部线性化为上面的形式。</p>
<p>即：<span class="math inline">\(\Psi\)</span>
（形变函数）局部线性近似 -&gt; <span class="math inline">\(F = \partial
x / \partial u\)</span> -&gt; SVD, RS, ... (Strain Measuring)</p>
<p>直觉上 SVD（<span class="math inline">\(F = U \Sigma
V^T\)</span>）：</p>
<ol type="1">
<li><span class="math inline">\(V^T\)</span>：Rest-&gt;Aligned</li>
<li><span class="math inline">\(\Sigma\)</span>：拉伸收缩</li>
<li><span class="math inline">\(U\)</span>：Aligned-&gt;World</li>
</ol>
<p>避免 Global Rotation后：RS 分解。</p>
<h4 id="strain">Strain</h4>
<blockquote>
<p>Dimension-less Quantity: measures the amount of deformation.</p>
<p>Strain represents the displacement between particles in the body
relative to a reference length.</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=18">IPBA-optimized.pdf
- p18 - Strain. From the deformation gradient we define a strain metric.
Strain is a dimension-less (or unit-less) quantity that measures the
amount of deformation.</a></p>
</blockquote>
<p>仅仅是<strong>某一种</strong>刻画形变程度的方式！</p>
<p><span class="math display">\[
Strain(x_r) = 0
\]</span></p>
<p>例如：Mass-Spring: <span class="math inline">\(l / l_0\)</span></p>
<p>常用的应变</p>
<ol type="1">
<li>Green's Finite Strain, -&gt; Right Cauchy-Green Strain</li>
<li>Cauchy infinitesimal strain,</li>
<li>co-rotated strain.</li>
</ol>
<p>E.g. Right Cauchy-Green Strain:</p>
<p><span class="math display">\[
\epsilon_{ij} = \frac{1}{2} (F^T F - I)
\]</span></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=18">IPBA-optimized.pdf
- p18 - IPBA-optimized-P18-20230130113230</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P18-20230130113230-20230130113232-5ig88uv.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P18-20230130113230-20230130113232-5ig88uv.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=18">IPBA-optimized.pdf
- p18 - IPBA-optimized-P18-20230130113306</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P18-20230130113306-20230130113308-hca2udj.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P18-20230130113306-20230130113308-hca2udj.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>Cauchy infinitesimal strain: 如果 <span
class="math inline">\(D^TD\)</span>项可以忽略。</p>
<p><span class="math display">\[
\begin{aligned}
\epsilon &amp; = \frac{1}{2} (F^T + F + D^TD) -I &amp;
\mathrm{(Green)}\\
  &amp; \approx \frac{1}{2} (F + F^T) - I &amp;
\mathrm{(Cauchy~infinitesimal)}
\end{aligned}
\]</span></p>
<p>如果用Einstein Notation：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=19">IPBA-optimized.pdf
- p19 - IPBA-optimized-P19-20230130113523</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P19-20230130113523-20230130113524-njqz5z9.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P19-20230130113523-20230130113524-njqz5z9.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>主要好处在于，该strain是线性的，导出的形变能量是二次的，具有常数的Hessian。<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=19">IPBA-optimized.pdf
- p19 - The primary advantage of this strain metric is that it is
linear, which leads to a quadratic energy and a constant Hessian that
can be pre-factored or otherwise analyzed</a></p>
<p>缺点在于，这个strain受到world-space rotation的影响。<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=19">IPBA-optimized.pdf
- p19 - Unfortunately, this strain metric does penalize world-space
rotations, leading to a variety of unpleasant artifacts under large
deformations.</a></p>
<p>在图形学中最常用的是 co-rotated strain metric:</p>
<p><span class="math display">\[
\epsilon = \frac{1}{2} \left( \tilde{F} + \tilde{F}^T \right) - I
\]</span></p>
<ul>
<li>在式子中显式地丢掉了无关的旋转，<span
class="math inline">\(F=Q\tilde{F}\)</span>（极分解）</li>
</ul>
<h4 id="stress">Stress</h4>
<blockquote>
<p>描述单位面积上的力，维度相关</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=19">IPBA-optimized.pdf
- p19 - Stress. Unlike strain, stress is not a dimension-less quantity.
In three dimensions, stress has units of Newton’s per meter squared (𝑁
/𝑚2). Instead of measuring the amount of deformation, it measures the
materials reaction to that deformation.</a></p>
</blockquote>
<p>常用模型是为线性的</p>
<p><span class="math display">\[
\sigma = C \epsilon
\]</span></p>
<p>其中 <span class="math inline">\(C\)</span>
是一个3x3x3x3的<strong>张量</strong>，但是！考虑到：</p>
<ol type="1">
<li><span class="math inline">\(\sigma, \epsilon\)</span> 对称</li>
<li>Iso-tropic （各向同性）</li>
</ol>
<p>只有两个参数，Lame Coefficients:</p>
<p><span class="math display">\[
\sigma_{ij} = \lambda \epsilon_{kk}\delta_{ij} + 2\mu \epsilon_{ij}
\]</span></p>
<p>矩阵形式：</p>
<p><span class="math display">\[
\sigma = \lambda Tr(\epsilon) I + 2 \mu \epsilon
\]</span></p>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=19">IPBA-optimized.pdf
- p19 - the stress is some constant times the strain plus a scaled
identity matrix times the trace of the strain. The second term
approximately preserves volume.</a></p>
</blockquote>
<h4 id="弹性能量力">弹性能量、力</h4>
<p>势能密度：(Einstein Notation)</p>
<p><span class="math display">\[
\eta = \frac{1}{2} \sigma_{ij} \epsilon_{ij}
= \frac{1}{2} \sigma : \epsilon=\frac 1 2 \sum_{i, j} \sigma _{ij}
\epsilon_{ij}
\]</span></p>
<p>总能量是势能密度的积分。</p>
<p>Traction（切向力？）：</p>
<p><span class="math display">\[
\tau = \sigma n
\]</span></p>
<ul>
<li>其中 <span class="math inline">\(n\)</span> 是单位法向。</li>
</ul>
<blockquote>
<p><span class="math inline">\(F\)</span> 始终让总势能减少。</p>
</blockquote>
<p><span class="math display">\[
f_i = -\frac{\partial \eta}{\partial x_i}
\]</span></p>
<p>也可以被定义区域积分：</p>
<p><span class="math display">\[
f = \int_{\partial R} \sigma n \mathrm{d}S
\]</span></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - IPBA-optimized-P20-20230130120242</a></p>
<img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P20-20230130120242-20230130120245-xqcxh2o.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P20-20230130120242-20230130120245-xqcxh2o.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload">
<h4 id="stress-revisit">Stress Revisit</h4>
<p>Definition of Stress: Maps <em>normal</em> to <em>force</em></p>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - The definition of traction makes clear that stress maps from
normals to forces (per unit area).</a></p>
</blockquote>
<p>问题在于定义的空间是 世界/物体？</p>
<ul>
<li><p>如果是<strong>世界坐标系</strong>下的法向和Stress 计算得到对应
Cauchy Stress -- <span class="math inline">\(\sigma\)</span></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - If both normals and forces are in world space, the stress is
known as a Cauchy stress and often written as 𝝈</a></p></li>
<li><p>物体坐标系的法向到物体坐标系的力 - 对应PK stress - <span
class="math inline">\(S\)</span></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - If the stress maps normals in material space to forces in
material space it is known as a second Piola-Kirchhoff stress and
sometimes written as 𝐒.</a></p></li>
<li><p><strong>物体坐标系</strong>的法向到<strong>世界坐标系</strong>的力
- 对应PK1 stress - P</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - A first Piola-Kirchhoff stress maps normals in material space to
forces in world space and is written 𝐏</a></p></li>
</ul>
<p>如果是material space-&gt;material space， -- PK2 -- <span
class="math inline">\(S\)</span></p>
<p>常用的是 PK1: Material Space Normal -&gt; World Space Force</p>
<p><span class="math display">\[
P = J \sigma F^{-T} = FS
\]</span></p>
<p>好处在于，PK1 给出的是从参考到世界坐标的映射。</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - IPBA-optimized-P20-20230130141155</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P20-20230130141155-20230130141201-t2scluh.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P20-20230130141155-20230130141201-t2scluh.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h4 id="塑性形变">塑性形变</h4>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=20">IPBA-optimized.pdf
- p20 - Plasticity. Plasticity refers to permanent deformation that
typically occurs when a material fails</a></p>
<p><span class="math display">\[
F = F_e F_p
\]</span></p>
<h3 id="流体ipba-optimized.pdf---p21---fluids">流体<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=21">IPBA-optimized.pdf
- p21 - Fluids</a></h3>
<p><span class="math display">\[
\begin{aligned}
\rho(u_t + u \cdot \nabla u) = - \nabla p + \mu \Delta u + f \\
\nabla \cdot u = 0
\end{aligned}
\]</span></p>
<ul>
<li><span class="math inline">\(u\)</span> 为速度场 - 欧拉视角</li>
<li><span class="math inline">\(u_t\)</span> 为加速度场 - 欧拉视角</li>
<li><span class="math inline">\(p\)</span> 为压强 - 欧拉视角</li>
<li><span class="math inline">\(\mu\)</span> 描述粘性</li>
<li><span class="math inline">\(f\)</span> 为外力</li>
</ul>
<h4 id="ipba-optimized.pdf---p21---material-derivative"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=21">IPBA-optimized.pdf
- p21 - Material derivative</a></h4>
<p>欧拉视角下，流体的加速度是</p>
<p><span class="math display">\[
a_p = \frac{d}{dt} v_p(t) = \frac{d}{dt} u(x_p(t), t) =u_t + u \cdot
\nabla u
\]</span></p>
<p>拉格朗日视角下的量 <span
class="math inline">\(u\)</span>，材料导数（拉格朗日视角的）定义为</p>
<p><span class="math display">\[
Du / Dt = u_t + u \cdot \nabla u
\]</span></p>
<h4 id="ipba-optimized.pdf---p22---forces"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=22">IPBA-optimized.pdf
- p22 - Forces</a></h4>
<p><span class="math display">\[
\rho(u_t + u \cdot \nabla u) = - \nabla p + \mu \Delta u + f
\]</span></p>
<ul>
<li>压强 -- 用于抵消压缩
<ul>
<li>在某些情况下，也被称为不可压缩流体的 Lagrange Multiplier -&gt;
Divergence-Free Constraint</li>
</ul></li>
<li>粘性力 -- Penalizes Velocity Differences</li>
<li>外力 <span class="math inline">\(f\)</span></li>
</ul>
<h4 id="incompressibility">Incompressibility</h4>
<p>从质量守恒方程：</p>
<p><span class="math display">\[
\rho_t + \Delta \cdot (\rho u) = 0
\]</span></p>
<p>Apply Product Rule，Spartial Derivative term gives:</p>
<p><span class="math display">\[
\nabla \cdot (\rho u) = u\cdot \nabla \rho + \rho \nabla \cdot u
\]</span></p>
<h2 id="ipba-optimized.pdf---p24---spatial-discretization"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=24">IPBA-optimized.pdf
- p24 - SPATIAL DISCRETIZATION</a></h2>
<ol type="1">
<li>Lagrange or Eulerian</li>
<li>Spatial data Structures.</li>
<li>FDM &amp; FEM</li>
</ol>
<h3 id="ipba-optimized.pdf---p24---lagrangian-vs-eulerian"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=24">IPBA-optimized.pdf
- p24 - Lagrangian vs Eulerian</a></h3>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=24">IPBA-optimized.pdf
- p24 - IPBA-optimized-P24-20230130141500</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P24-20230130141500-20230130141502-v2eynn4.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P24-20230130141500-20230130141502-v2eynn4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h3 id="ipba-optimized.pdf---p24---grids-meshes-particles"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=24">IPBA-optimized.pdf
- p24 - Grids, Meshes, Particles</a></h3>
<h4 id="grid">Grid</h4>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=24">IPBA-optimized.pdf
- p24 - Perhaps the most common spatial data structure is the regular
grid. In this structure all edges have the same length, called the grid
spacing, which is often denoted ℎ or Δ𝑥.</a></p>
</blockquote>
<p>Describe a Grid: <a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=24">IPBA-optimized.pdf
- p24 - The grid can be described by a few redundant parameters: the
grid spacing, the grid resolution (i.e. the number of cells in each
dimension), and the upper and lower extent of the gird.</a></p>
<p>对于记录一阶微分量，常用MAC-Grid（流速度场）<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=25">IPBA-optimized.pdf
- p25 - A special case, known as the staggered grid (sometimes
less-usefully referred to as the MAC grid</a>；<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=25">IPBA-optimized.pdf
- p25 - This structure is commonly used in fluid simulation to achieve
second-order accuracy when using finite differences at small additional
computational cost.</a></p>
<h4 id="mesh">Mesh</h4>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=25">IPBA-optimized.pdf
- p25 - “Meshes” itself is an ill-defined term, but typically the term
is used to refer to simplicial complexes.</a></p>
<h4 id="particles">Particles</h4>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=26">IPBA-optimized.pdf
- p26 - Given the difficulty of generating tetrahedral meshes, some
choose to represent geometry as a set of particles</a></p>
<p>缺点：Integration is Difficult</p>
<h4 id="hybrid-structures">Hybrid Structures</h4>
<p>MPM, FLIP ...</p>
<h3 id="interpolation">Interpolation</h3>
<p>1-d情况下，<strong>线性插值</strong>是指：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=26">IPBA-optimized.pdf
- p26 - IPBA-optimized-P26-20230130143507</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P26-20230130143507-20230130143508-9rim08t.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P26-20230130143507-20230130143508-9rim08t.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>可以推广到双线性、三线性、重心坐标插值等等技术。</p>
<p>2d情况，可以考虑<strong>双线性插值</strong>：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=27">IPBA-optimized.pdf
- p27 - IPBA-optimized-P27-20230130143733</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P27-20230130143733-20230130143735-ong722m.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P27-20230130143733-20230130143735-ong722m.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>3-d情况，<strong>三线性插值</strong>：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=27">IPBA-optimized.pdf
- p27 - IPBA-optimized-P27-20230130144004</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P27-20230130144004-20230130144006-i91uidf.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P27-20230130144004-20230130144006-i91uidf.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<blockquote>
<p>直观上来说，内部点对某一个采样点的权就是对边/面/体的测度。</p>
</blockquote>
<p>另外，对于mesh，有<strong>重心坐标</strong>插值：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=28">IPBA-optimized.pdf
- p28 - IPBA-optimized-P28-20230130144137</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P28-20230130144137-20230130144139-whqxuaf.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P28-20230130144137-20230130144139-whqxuaf.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><strong>多项式插值：</strong>例如拉格朗日多项式</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=29">IPBA-optimized.pdf
- p29 - IPBA-optimized-P29-20230130144224</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P29-20230130144224-20230130144226-jfxfgfe.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P29-20230130144224-20230130144226-jfxfgfe.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><strong>逼近函数</strong>：例如傅立叶变换后的傅立叶系数，实际上是一种到某一组基函数的投影。<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=29">IPBA-optimized.pdf
- p29 - Approximating functions.</a></p>
<h3 id="finite-differences">Finite Differences</h3>
<p>二阶差分格式：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=31">IPBA-optimized.pdf
- p31 - IPBA-optimized-P31-20230130150631</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P31-20230130150631-20230130150632-kj6dnil.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P31-20230130150631-20230130150632-kj6dnil.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>也会带来一些问题（震荡）</p>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=31">IPBA-optimized.pdf
- p31 - When choosing a finite difference scheme, order of accuracy is
only one of several considerations. Other considerations include the
overall stability of the scheme, the nature of the errors produced by
the scheme (e.g., dissipative or dispersive), and the conservation
properties of the scheme.</a></p>
</blockquote>
<p>解决方法为：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=31">IPBA-optimized.pdf
- p31 - Upwind discretizations are often preferred for advection.
T</a></p>
<h4 id="ipba-optimized.pdf---p32---laplacian-operator."><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=32">IPBA-optimized.pdf
- p32 - Laplacian operator.</a></h4>
<p>数值计算上：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=32">IPBA-optimized.pdf
- p32 - IPBA-optimized-P32-20230130160916</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P32-20230130160916-20230130160918-mswzitq.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P32-20230130160916-20230130160918-mswzitq.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h3 id="finite-elements">Finite Elements</h3>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=34">IPBA-optimized.pdf
- p34 - Arbitrary functions in the equations we wish to solve are then
projected onto this piecewise linear space. This projection is often
referred to as a Galerkin projection.</a></p>
<h4 id="soft-bodies-1">Soft bodies</h4>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=34">IPBA-optimized.pdf
- p34 - Finite elements are commonly used in graphics for animating
elastic bodies</a></p>
</blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=35">IPBA-optimized.pdf
- p35 - IPBA-optimized-P35-20230130165255</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P35-20230130165255-20230130165256-cog7h9a.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P35-20230130165255-20230130165256-cog7h9a.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>算法如下：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=36">IPBA-optimized.pdf
- p36 - IPBA-optimized-P36-20230130165358</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P36-20230130165358-20230130165359-twfjsaw.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P36-20230130165358-20230130165359-twfjsaw.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>部分约定解释如下：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=35">IPBA-optimized.pdf
- p35 - IPBA-optimized-P35-20230130165759</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P35-20230130165759-20230130165801-3vzf0pa.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P35-20230130165759-20230130165801-3vzf0pa.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
</div><div class="story post-story"><h2 id="integrators">Integrators</h2>
<ol type="1">
<li><p>Explicit</p>
<ol type="1">
<li><p>Trapzoidal / Mid point method</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=37">IPBA-optimized.pdf
- p37 - IPBA-optimized-P37-20230130172105</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P37-20230130172105-20230130172106-12dl1ab.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P37-20230130172105-20230130172106-12dl1ab.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=37">IPBA-optimized.pdf
- p37 - IPBA-optimized-P37-20230130172142</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P37-20230130172142-20230130172143-woug9rp.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P37-20230130172142-20230130172143-woug9rp.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p></li>
<li><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Verlet_integration">Verlet
Method</a></p>
<p><img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/image-20230130171940-pszeark.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/image-20230130171940-pszeark.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload" title="image"></p></li>
<li><p>Symplectic Euler</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=37">IPBA-optimized.pdf
- p37 - IPBA-optimized-P37-20230130172220</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P37-20230130172220-20230130172222-eu032a6.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P37-20230130172220-20230130172222-eu032a6.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p></li>
</ol></li>
</ol>
<h3 id="implicit-integration">Implicit Integration</h3>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=39">IPBA-optimized.pdf
- p39 - Sometimes we wish to solve stiff problems. “Stiff problem” is
not particularly well defined, but they occur, for example, when
materials have very strong resistance to deformation.</a></p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=40">IPBA-optimized.pdf
- p40 - IPBA-optimized-P40-20230130172324</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P40-20230130172324-20230130172326-a9ez1sm.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P40-20230130172324-20230130172326-a9ez1sm.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
</div><div class="story post-story"><h2 id="constraints">Constraints</h2>
<h3 id="bilateral-unilateral-constraints">Bilateral / Unilateral
constraints</h3>
<p>等式约束、不等式约束</p>
<h3 id="soft-or-hard">Soft or Hard？</h3>
<ol type="1">
<li>Hard - 严格满足</li>
<li>Soft - “几乎”满足</li>
</ol>
<h3 id="solutions">Solutions</h3>
<p>几乎只有如下方案：</p>
<ol type="1">
<li>惩罚力</li>
<li>拉格朗日乘子</li>
<li>广义坐标法</li>
</ol>
<h4 id="ipba-optimized.pdf---p43---penalty-methods."><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=43">IPBA-optimized.pdf
- p43 - Penalty methods.</a></h4>
<blockquote>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=43">IPBA-optimized.pdf
- p43 - Penalty methods attempt to enforce constraints by penalizing
constraint violation using spring-like restoring forces.</a></p>
</blockquote>
<p>优点：实现简单</p>
<p>缺点：</p>
<ol type="1">
<li>给整个系统引入了Stiff Force，需要隐式积分来确保不发生数值爆炸</li>
<li>难以稳定在一个稳态上。</li>
</ol>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=43">IPBA-optimized.pdf
- p43 - Nevertheless, penalty methods are still widely used, and
researchers continue to develop approaches to mitigate their
drawbacks</a></p>
<h4 id="ipba-optimized.pdf---p43---lagrange-multipliers."><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=43">IPBA-optimized.pdf
- p43 - Lagrange multipliers.</a></h4>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=43">IPBA-optimized.pdf
- p43 - The method of Lagrange multipliers is an approach that
explicitly includes in the equations of motion the constraint forces
necessary to maintain the constraints.</a></p>
<p>虚功原理：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=44">IPBA-optimized.pdf
- p44 - IPBA-optimized-P44-20230131111140</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P44-20230131111140-20230131111142-sa2z13y.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P44-20230131111140-20230131111142-sa2z13y.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>总的来说，牛顿第二定律为：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=45">IPBA-optimized.pdf
- p45 - IPBA-optimized-P45-20230131111424</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P45-20230131111424-20230131111425-0hx295w.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P45-20230131111424-20230131111425-0hx295w.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<p>总体推导为(185)：</p>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=45">IPBA-optimized.pdf
- p45 - IPBA-optimized-P45-20230131111637</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P45-20230131111637-20230131111638-iwwaidy.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P45-20230131111637-20230131111638-iwwaidy.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h4
id="广义坐标法ipba-optimized.pdf---p45---generalized-coordinates.">广义坐标法<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=45">IPBA-optimized.pdf
- p45 - Generalized coordinates.</a></h4>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=46">IPBA-optimized.pdf
- p46 - IPBA-optimized-P46-20230131111727</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P46-20230131111727-20230131111729-vw0jg4x.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P46-20230131111727-20230131111729-vw0jg4x.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h3
id="ipba-optimized.pdf---p48---practical-constrained-rigid-body-systems"><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=48">IPBA-optimized.pdf
- p48 - Practical Constrained Rigid Body Systems</a></h3>
<p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=50">IPBA-optimized.pdf
- p50 - IPBA-optimized-P50-20230131111915</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P50-20230131111915-20230131111916-i9h4egr.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P50-20230131111915-20230131111916-i9h4egr.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p>
<h3 id="collisions">Collisions</h3>
<p>主要研究：</p>
<ol type="1">
<li><p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=50">IPBA-optimized.pdf
- p50 - Collision detection. Before collisions can be resolved, they
must first be detected by checking for interpenetration of object
geometry.</a></p>
<ol type="1">
<li><p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=50">IPBA-optimized.pdf
- p50 - Polygonal geometry is commonly used to represent both rigid and
deformable bodies. Many algorithms have been developed for finding
intersections of polytopes, particularly convex polytopes (illustrated
above).</a></p>
<p>SAT：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=50">IPBA-optimized.pdf
- p50 - Separating Axis Theorem</a></p>
<p>Convex Decomposition：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=50">IPBA-optimized.pdf
- p50 - Convex decompositions</a></p></li>
<li><p>SDF：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - signed distance field.</a></p></li>
<li><p>数据结构上：BV<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - bounding volumes</a>、<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - hierarchical bounding volumes</a>、Spatial Partition<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - spatial partitions</a></p></li>
<li><p>DCD：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - discrete collision detection</a>；CCD：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - Continuous collision detection</a> （<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - Ray casting</a>、<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=51">IPBA-optimized.pdf
- p51 - numerical solvers</a>）</p></li>
</ol></li>
<li><p>Response：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=52">IPBA-optimized.pdf
- p52 - Collision response</a></p>
<ol type="1">
<li><p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=53">IPBA-optimized.pdf
- p53 - Deformable object collisions</a></p></li>
<li><p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=53">IPBA-optimized.pdf
- p53 - Rigid body collisions.</a>：不允许形变：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=53">IPBA-optimized.pdf
- p53 - Typically, collision laws are used to relate quantities before
and after the collision [Chatterjee and Ruina 1998].</a></p></li>
<li><p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=54">IPBA-optimized.pdf
- p54 - Frictional collisions.</a>：切向力</p>
<ol type="1">
<li><p><a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=54">IPBA-optimized.pdf
- p54 - Coulomb friction model</a></p>
<p>摩擦锥：<a
href="assets/IPBA-optimized-20221205101915-1a7vn7h.pdf?p=54">IPBA-optimized.pdf
- p54 - IPBA-optimized-P54-20230131112746</a> <img src="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P54-20230131112746-20230131112747-y9uc0wl.png" class="lazyload" data-srcset="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/IPBA-optimized-P54-20230131112746-20230131112747-y9uc0wl.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class=" lazyload"></p></li>
</ol></li>
</ol></li>
</ol>

</div>
  </div>
  
  
    
    <div class='footer'>
      
      
      
        <div class='copyright'>
          <blockquote>
            
              
                <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA
4.0) 协议</p>

              
            
              
                <p>本文永久链接是：<a href=http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/>http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/</a></p>
              
            
          </blockquote>
        </div>
      
      
    </div>
  
  
    


  <div class='article-meta' id="bottom">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateModified" datetime="2023-02-05T12:00:01+08:00">
  <a class='notlink'>
    <i class="fa-solid fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2023年2月5日</p>
  </a>
</div>

        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/&title=Siggraph 2021 course - An Introduction to Physics-based Animation - Adversarr's Blog&summary=Siggraph 2021 course notes.
See more in Siyuan."
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qq.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qq.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/&title=Siggraph 2021 course - An Introduction to Physics-based Animation - Adversarr's Blog&summary=Siggraph 2021 course notes.
See more in Siyuan."
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qzone.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/qzone.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer noopener"
          
          target="_blank" href="http://service.weibo.com/share/share.php?url=http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/&title=Siggraph 2021 course - An Introduction to Physics-based Animation - Adversarr's Blog&summary=Siggraph 2021 course notes.
See more in Siyuan."
          
          >
          
            <img src="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/weibo.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/logo/128/weibo.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
          
        </a>
      
    
      
    
      
    
  </div>
</div>



        
      
    </div>
    <!-- Custom Files bottomMeta begin -->
    
    <!-- Custom Files bottomMeta end -->
  </div>


  
  

  
    <div class="prev-next">
      
        <a class='prev' href='/2023/02/24/CG/Things/Fluid/SurfaceTension/'>
          <p class='title'><i class="fa-solid fa-chevron-left" aria-hidden="true"></i>流体-表面张力</p>
          <p class='content'>Surface tension
Summary

单个流体、空气、固体边界：决定了弯月面形状、角度、对固体附加的切向力等

常规流体（例如水滴等，形状规则）： 仍然是NS方程主导，附加表面张力
...</p>
        </a>
      
      
        <a class='next' href='/2022/11/30/CG/SortByCato/Unified/ipc/'>
          <p class='title'>论文阅读：Incremental Potential Contact 大杂烩<i class="fa-solid fa-chevron-right" aria-hidden="true"></i></p>
          <p class='content'>Incremental Potential Contact

C-IPC
Related Works
Shell and Rods
Strain Limiting
目的：对于膜(Shell)的形...</p>
        </a>
      
    </div>
  
  <!-- Custom Files postEnd begin-->
  
  <!-- Custom Files postEnd end-->
</article>


  


  <article class="post white-box shadow floatable blur" id="comments">
    <span hidden>
      <meta itemprop="discussionUrl" content="/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/index.html#comments">
    </span>
    <p ct><i class='fa-solid fa-comments'></i> 评论</p>
    

    <div id="layoutHelper-comments"></div>

  </article>






</div>
<aside id='l_side' itemscope itemtype="http://schema.org/WPSideBar">
  
  
    
    



  <section class="widget toc-wrapper shadow floatable blur desktop mobile pjax" id="toc-div" >
    
  <header>
    
      <i class="fa-solid fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#a-simple-start-particle-dynamics"><span class="toc-text">A simple start: Particle
Dynamics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#passive-particle-in-velocity-field"><span class="toc-text">Passive Particle in Velocity
Field</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#particle-with-mass"><span class="toc-text">Particle with mass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mass-spring-system"><span class="toc-text">Mass Spring System</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mathematical-models"><span class="toc-text">Mathematical Models</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#physics-law"><span class="toc-text">Physics Law</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p8---newtons-laws-of-motion."><span class="toc-text">IPBA-optimized.pdf
- p8 - Newton’s Laws of Motion.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%A8%E9%87%8F%E5%AE%88%E6%81%92%E5%8A%A8%E9%87%8F%E5%AE%88%E6%81%92%E8%83%BD%E9%87%8F%E5%AE%88%E6%81%92-ipba-optimized.pdf---p10---conservation-of-mass-momentum-energy"><span class="toc-text">质量守恒、动量守恒、能量守恒
IPBA-optimized.pdf
- p10 - Conservation of Mass, Momentum, Energy</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#materials"><span class="toc-text">Materials</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p12---rigid-bodies"><span class="toc-text">IPBA-optimized.pdf
- p12 - Rigid Bodies</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#dof-%E6%A8%A1%E5%9E%8B"><span class="toc-text">6DoF 模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%BF%E9%80%9F%E5%BA%A6%E8%A7%92%E9%80%9F%E5%BA%A6ipba-optimized.pdf---p13---linear-and-angular-velocity"><span class="toc-text">线速度、角速度IPBA-optimized.pdf
- p13 - Linear and Angular Velocity</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#soft-bodies"><span class="toc-text">Soft Bodies</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#strain"><span class="toc-text">Strain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stress"><span class="toc-text">Stress</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%B9%E6%80%A7%E8%83%BD%E9%87%8F%E5%8A%9B"><span class="toc-text">弹性能量、力</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stress-revisit"><span class="toc-text">Stress Revisit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A1%91%E6%80%A7%E5%BD%A2%E5%8F%98"><span class="toc-text">塑性形变</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E4%BD%93ipba-optimized.pdf---p21---fluids"><span class="toc-text">流体IPBA-optimized.pdf
- p21 - Fluids</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p21---material-derivative"><span class="toc-text">IPBA-optimized.pdf
- p21 - Material derivative</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p22---forces"><span class="toc-text">IPBA-optimized.pdf
- p22 - Forces</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#incompressibility"><span class="toc-text">Incompressibility</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipba-optimized.pdf---p24---spatial-discretization"><span class="toc-text">IPBA-optimized.pdf
- p24 - SPATIAL DISCRETIZATION</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ipba-optimized.pdf---p24---lagrangian-vs-eulerian"><span class="toc-text">IPBA-optimized.pdf
- p24 - Lagrangian vs Eulerian</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipba-optimized.pdf---p24---grids-meshes-particles"><span class="toc-text">IPBA-optimized.pdf
- p24 - Grids, Meshes, Particles</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#grid"><span class="toc-text">Grid</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mesh"><span class="toc-text">Mesh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#particles"><span class="toc-text">Particles</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hybrid-structures"><span class="toc-text">Hybrid Structures</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#interpolation"><span class="toc-text">Interpolation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finite-differences"><span class="toc-text">Finite Differences</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p32---laplacian-operator."><span class="toc-text">IPBA-optimized.pdf
- p32 - Laplacian operator.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finite-elements"><span class="toc-text">Finite Elements</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#soft-bodies-1"><span class="toc-text">Soft bodies</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#integrators"><span class="toc-text">Integrators</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#implicit-integration"><span class="toc-text">Implicit Integration</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#constraints"><span class="toc-text">Constraints</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bilateral-unilateral-constraints"><span class="toc-text">Bilateral &#x2F; Unilateral
constraints</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#soft-or-hard"><span class="toc-text">Soft or Hard？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solutions"><span class="toc-text">Solutions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p43---penalty-methods."><span class="toc-text">IPBA-optimized.pdf
- p43 - Penalty methods.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ipba-optimized.pdf---p43---lagrange-multipliers."><span class="toc-text">IPBA-optimized.pdf
- p43 - Lagrange multipliers.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%BF%E4%B9%89%E5%9D%90%E6%A0%87%E6%B3%95ipba-optimized.pdf---p45---generalized-coordinates."><span class="toc-text">广义坐标法IPBA-optimized.pdf
- p45 - Generalized coordinates.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ipba-optimized.pdf---p48---practical-constrained-rigid-body-systems"><span class="toc-text">IPBA-optimized.pdf
- p48 - Practical Constrained Rigid Body Systems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collisions"><span class="toc-text">Collisions</span></a></li></ol></li></ol>
    </div>
  </section>

  


<!-- 没有 pjax 占位会报错 万恶的 pjax -->

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>


  <!-- Custom Files side begin -->
  
  <!-- Custom Files side end -->
</aside>



          <!--此文件用来存放一些不方便取值的变量-->
<!--思路大概是将值藏到重加载的区域内-->

<pjax>
<script>
  window.pdata={}
  pdata.ispage=true;
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  pdata.commentConfig={};
  //  see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs
  
    // header
    var l_header=document.getElementById("l_header");
    
    l_header.classList.add("show");
    
    
      // cover
      var cover_wrapper=document.querySelector('#l_cover .cover-wrapper');
      var scroll_down=document.getElementById('scroll-down');
      cover_wrapper.id="none";
      cover_wrapper.style.display="none";
      scroll_down.style.display="none";
    
  
</script>
</pjax>
        </div>
        
  
  <footer class="footer clearfix"  itemscope itemtype="http://schema.org/WPFooter">
    <br><br>
    
      
        <div class="aplayer-container">
          


        </div>
      
    
      
        <br>
        <div class="social-wrapper" itemprop="about" itemscope itemtype="http://schema.org/Thing">
          
            
          
            
          
            
          
        </div>
      
    
      
        <div><p>博客内容遵循 <a
target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享
4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
      
    
      
        
          <div><p><span id="lc-sv">本站总访问量为 <span
id="number"><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span>
次</span> <span id="lc-uv">访客数为 <span
id="number"><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span>
人</span></p>
</div>
        
      
    
      
        本站使用
        <a href="https://github.com/volantis-x/hexo-theme-volantis/tree/5.4.0" target="_blank" class="codename">Volantis</a>
        作为主题
      
    
    <!-- Custom Files footer begin-->
    
    <!-- Custom Files footer end-->
  </footer>


        <a id="s-top" class="fa-solid fa-arrow-up fa-fw" href="/" onclick="return false;" title="top"></a>
      </div>
    </div>
    <div>
      <script>
  /******************** volantis.dom ********************************/
  // 页面选择器 将dom对象缓存起来 see: /source/js/app.js etc.
  volantis.dom.bodyAnchor = volantis.dom.$(document.getElementById("safearea")); // 页面主体
  volantis.dom.topBtn = volantis.dom.$(document.getElementById('s-top')); // 向上
  volantis.dom.wrapper = volantis.dom.$(document.getElementById('wrapper')); // 整个导航栏
  volantis.dom.coverAnchor = volantis.dom.$(document.querySelector('#l_cover .cover-wrapper')); // 1个
  volantis.dom.switcher = volantis.dom.$(document.querySelector('#l_header .switcher .s-search')); // 搜索按钮   移动端 1个
  volantis.dom.header = volantis.dom.$(document.getElementById('l_header')); // 移动端导航栏
  volantis.dom.search = volantis.dom.$(document.querySelector('#l_header .m_search')); // 搜索框 桌面端 移动端 1个
  volantis.dom.mPhoneList = volantis.dom.$(document.querySelectorAll('#l_header .m-phone .list-v')); //  手机端 子菜单 多个
</script>

<script>
  
  volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fortawesome/fontawesome-free/css/all.min.css");
  
  
  
</script>

<!-- required -->


<!-- internal -->

<script src="/js/app.af2d54c8.js"></script>





  













<div id="rightmenu-wrapper">
  <ul class="list-v rightmenu" id="rightmenu-content">
    
  <li class='navigation menuNavigation-Content'>


    <a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fa-solid fa-arrow-left fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fa-solid fa-arrow-right fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fa-solid fa-redo fa-fw"></i></a>



    <a class="nav icon-only fix-cursor-default" onclick="VolantisApp.scrolltoElement(volantis.dom.bodyAnchor)"><i class="fa-solid fa-arrow-up fa-fw"></i></a>


  </li>


    <hr class="menuLoad-Content" >



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyPaste" data-event="copyPaste" data-group="inputBox">
      <i class="fa-solid fa-paste fa-fw"></i>
      粘贴文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyAll" data-event="copyAll" data-group="inputBox">
      <i class="fa-solid fa-object-ungroup fa-fw"></i>
      全选文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyCut" data-event="copyCut" data-group="inputBox">
      <i class="fa-solid fa-cut fa-fw"></i>
      剪切文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyText" data-event="copyText" data-group="seletctText">
      <i class="fa-solid fa-copy fa-fw"></i>
      复制文本
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="searchWord" data-event="OpenSearch(__text__)" data-group="seletctText">
      <i class="fa-solid fa-search fa-fw"></i>
      站内搜索
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="bingSearch" data-event="window.open(`https://cn.bing.com/search?q=${__text__}`)" data-group="seletctText">
      <i class="fa-solid fa-search fa-fw"></i>
      必应搜索
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="openTab" data-event="window.open(__link__)" data-group="elementCheck">
      <i class="fa-solid fa-external-link-square-alt fa-fw"></i>
      新标签页打开
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyLink" data-event="copyLink" data-group="elementCheck">
      <i class="fa-solid fa-link fa-fw"></i>
      复制链接地址
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="copyImg" data-event="copyImg" data-group="elementImage">
      <i class="fa-solid fa-image fa-fw"></i>
      复制图片
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="googleImg" data-event="window.open(`https://www.google.com.hk/searchbyimage?image_url=${__link__}`)" data-group="elementImage">
      <i class="fa-solid fa-images fa-fw"></i>
      谷歌识图
    </span>
  </li>



  <li class="menuLoad-Content">
    <a class="vlts-menu fix-cursor-default" id="help" target="_blank" rel="noopener" href="https://volantis.js.org/faqs/" data-group="link">
      <i class="fa-solid fa-question fa-fw"></i>
      常见问题
    </a>
  </li>



  <li class="menuLoad-Content">
    <a class="vlts-menu fix-cursor-default" id="examples" target="_blank" rel="noopener" href="https://volantis.js.org/examples/" data-group="link">
      <i class="fa-solid fa-rss fa-fw"></i>
      示例博客
    </a>
  </li>



  <li class="menuLoad-Content">
    <a class="vlts-menu fix-cursor-default" id="contributors" target="_blank" rel="noopener" href="https://volantis.js.org/contributors/" data-group="link">
      <i class="fa-solid fa-fan fa-fw"></i>
      加入社区
    </a>
  </li>



    <hr class="menuLoad-Content" >



  <li class="menuLoad-Content">
    <a class="vlts-menu fix-cursor-default" id="source_docs" target="_blank" rel="noopener" href="https://github.com/volantis-x/volantis-docs/" data-group="link">
      <i class="fa-solid fa-code-branch fa-fw"></i>
      本站源码
    </a>
  </li>



  <li class="menuLoad-Content">
    <a class="vlts-menu fix-cursor-default" id="source_theme" target="_blank" rel="noopener" href="https://github.com/volantis-x/hexo-theme-volantis/" data-group="link">
      <i class="fa-solid fa-code-branch fa-fw"></i>
      主题源码
    </a>
  </li>



    <hr class="menuLoad-Content" >



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="darkMode" data-event="volantis.dark.toggle()" data-group="darkMode">
      <i class="fa-solid fa-moon fa-fw"></i>
      暗黑模式
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="printMode" data-event="printMode" data-group="articlePage">
      <i class="fa-solid fa-print fa-fw"></i>
      打印页面
    </span>
  </li>



  <li class="menuLoad-Content">
    <span class="vlts-menu fix-cursor-default event" id="readMode" data-event="readMode" data-group="articlePage">
      <i class="fa-solid fa-book-open fa-fw"></i>
      阅读模式
    </span>
  </li>


<div id="menuMusic">
  <li class='music name menuOption-Content'>
    <p class='nav music-title fix-cursor-default'></p>
  </li>
  <li class='music ctrl'>
    <a class='nav icon-only backward fix-cursor-default' href="/" onclick="return false;" title="backward">
      <i class='fa-solid fa-step-backward fa-fw'></i>
    </a>
    <a class='nav icon-only toggle fix-cursor-default' href="/" onclick="return false;" title="toggle">
      <i class='fa-solid fa-play fa-fw'></i>
    </a>
    <a class='nav icon-only forward fix-cursor-default' href="/" onclick="return false;" title="forward">
      <i class='fa-solid fa-step-forward fa-fw'></i>
    </a>
  </li>
  <li class='music volume'>
    <div class='nav volume'>
      <div class="aplayer-volume-bar-wrap">
        <div class="aplayer-volume-bar fix-cursor-pointer">
          <div class="aplayer-volume"></div>
          <i class='left fa-solid fa-volume-off fa-fw'></i>
          <i class='right fa-solid fa-volume-up fa-fw'></i>
        </div>
      </div>
    </div>
  </li>
</div>

  </ul>
</div>
<script src="/js/plugins/rightMenus.cd02aa19.js"></script>
<script>
  const RightMenusFunction = {};
  












  <!-- RightMenusFunction['copyPaste'] = (fun) => {fun()} -->





  <!-- RightMenusFunction['copyAll'] = (fun) => {fun()} -->





  <!-- RightMenusFunction['copyCut'] = (fun) => {fun()} -->





  <!-- RightMenusFunction['copyText'] = (fun) => {fun()} -->





  RightMenusFunction['searchWord'] = (__text__) => {OpenSearch(__text__)}





  RightMenusFunction['bingSearch'] = (__text__) => {window.open(`https://cn.bing.com/search?q=${__text__}`)}





  RightMenusFunction['openTab'] = (__link__) => {window.open(__link__)}





  <!-- RightMenusFunction['copyLink'] = (fun) => {fun()} -->





  <!-- RightMenusFunction['copyImg'] = (fun) => {fun()} -->





  RightMenusFunction['googleImg'] = (__link__) => {window.open(`https://www.google.com.hk/searchbyimage?image_url=${__link__}`)}



















  RightMenusFunction['darkMode'] = () => {volantis.dark.toggle()}





  <!-- RightMenusFunction['printMode'] = (fun) => {fun()} -->





  <!-- RightMenusFunction['readMode'] = (fun) => {fun()} -->





</script>



<!-- rightmenu要在darkmode之前（ToggleButton） darkmode要在comments之前（volantis.dark.push）-->

  <script>
const rootElement = document.documentElement;
const darkModeStorageKey = "color-scheme";
const rootElementDarkModeAttributeName = "color-scheme";
const setLS = (k, v) => {
    localStorage.setItem(k, v);
};
const removeLS = (k) => {
    localStorage.removeItem(k);
};
const getLS = (k) => {
    return localStorage.getItem(k);
};
const getModeFromCSSMediaQuery = () => {
  return window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
};
const resetRootDarkModeAttributeAndLS = () => {
  rootElement.removeAttribute(rootElementDarkModeAttributeName);
  removeLS(darkModeStorageKey);
};
const validColorModeKeys = {
  dark: true,
  light: true,
};
const applyCustomDarkModeSettings = (mode) => {
  const currentSetting = mode || getLS(darkModeStorageKey);
  getCustomDarkMode();
  if (currentSetting === getModeFromCSSMediaQuery()) {
    resetRootDarkModeAttributeAndLS();
  } else if (validColorModeKeys[currentSetting]) {
    rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting);
  } else {
    resetRootDarkModeAttributeAndLS();
  }
};
const invertDarkModeObj = {
  dark: "light",
  light: "dark",
};
/**
 * get target mode
 */
 const getCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);
  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  if(currentSetting=="dark"){
    volantis.dark.mode="light";
  }else{
    volantis.dark.mode="dark";
  }
  // console.log(volantis.dark.mode)
};
const toggleCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);
  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  setLS(darkModeStorageKey, currentSetting);
  return currentSetting;
};
/**
 * 暗黑模式触发器
 */
volantis.dark.toggle=()=>{
  const mode = toggleCustomDarkMode();
  applyCustomDarkModeSettings(mode);
  // 使用 volantis.dark.push 方法传入volantis.dark.toggle回调函数 参见layout/_partial/scripts/global.ejs
  volantis.dark.method.toggle.start();
}
/**
 * bind event for toggle button
 */

function bindToggleButton() {
  var btn= document.querySelectorAll("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn")
  btn.forEach(function (e) {
    volantis.dom.$(e).on('click',volantis.dark.toggle);
  })
}
applyCustomDarkModeSettings();
document.addEventListener("DOMContentLoaded", ()=>{
  volantis.requestAnimationFrame(bindToggleButton)
});
volantis.pjax.push(bindToggleButton);

const darkModelListeners={
  dark:(mediaQueryList )=>{
    if(mediaQueryList.matches){
      volantis.dark.mode = "dark";
    }
    volantis.dark.method.toggle.start();
  },
  light:(mediaQueryList)=>{
    if(mediaQueryList.matches){
      volantis.dark.mode = "light";
    }
    volantis.dark.method.toggle.start();
  }
}
window.matchMedia('(prefers-color-scheme: dark)').addListener(darkModelListeners.dark)
window.matchMedia('(prefers-color-scheme: light)').addListener(darkModelListeners.light)
</script>




<script>
  function loadIssuesJS() {
    
      const sites_api = document.getElementById('sites-api');
      if (sites_api != undefined && typeof SitesJS === 'undefined') {
        volantis.js("/js/plugins/tags/sites.76bf19b8.js")
      }
    
    
      const friends_api = document.getElementById('friends-api');
      if (friends_api != undefined && typeof FriendsJS === 'undefined') {
        volantis.js("/js/plugins/tags/friends.f372da57.js")
      }
    
    
      const contributors_api = document.getElementById('contributors-api');
      if (contributors_api != undefined && typeof ContributorsJS === 'undefined') {
        volantis.js("/js/plugins/tags/contributors.aec80453.js")
      }
    
  };
  loadIssuesJS()
  volantis.pjax.push(()=>{
    loadIssuesJS();
  })

</script>




  <script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/vanilla-lazyload/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  

<script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: ["#"],
	maxRPS: 6,
	hoverDelay: 0
  };
</script>
<script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/flying-pages/flying-pages.min.js"></script>





   <script type="text/javascript">
  function pjax_scrollrebeal() {
    ScrollReveal().reveal("#l_main .reveal", {
      distance: "32px",
      duration: "800",
      interval: "20",
      scale: "1",
      easing: "ease-out",
    });
  }
  function init_scrollrebeal() {
    if (typeof ScrollReveal == "undefined") {
      volantis.requestAnimationFrame(init_scrollrebeal);
    } else {
      pjax_scrollrebeal();
    }
  }
  volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/scrollreveal/dist/scrollreveal.min.js");
  document.addEventListener("DOMContentLoaded", init_scrollrebeal);
  volantis.pjax.push(
    pjax_scrollrebeal,
    "pjax_scrollrebeal",
    (setRequestAnimationFrame = false)
  );
</script>






      <script>
  volantis.layoutHelper("comments",`<div id="giscus_container"></div>`)

  volantis.giscus = {};

  function check_giscus() {
    if (volantis.dark.mode === "dark") {
      volantis.giscus.Theme = 'dark';
    } else {
      volantis.giscus.Theme = 'light';
    }

    return document.getElementById("giscus_container");
  }

  function pjax_giscus() {
    const HEAD = check_giscus();
    if (!HEAD) return;
    let cfg = Object.assign({"theme":{"light":"light","dark":"dark"},"repo":"Adversarr/Adversarr.github.io","repo-id":"xxx","category":"xxx","category-id":"xxx","mapping":"pathname","reactions-enabled":"1","emit-metadata":"0","lang":"zh-CN"},pdata.commentConfig)
    const script = document.createElement('script');
    script.setAttribute('src', 'https://giscus.app/client.js');
    Object.keys(cfg).forEach(k=>{
      if (k != "theme") {
        script.setAttribute('data-'+k, cfg[k]);
      }
    })
    script.setAttribute('data-theme', volantis.giscus.Theme);
    script.setAttribute('crossorigin', "anonymous");
    HEAD.appendChild(script);
  }

  function dark_giscus() {
    const HEAD = check_giscus();
    if (!HEAD) return;

    const message = {
      setConfig: {
        theme: volantis.giscus.Theme
      }
    };
    const giscusIframe = document.querySelector('iframe.giscus-frame');
    giscusIframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }
  pjax_giscus();
  volantis.pjax.push(pjax_giscus);
  volantis.dark.push(dark_giscus);
</script>

    





<!-- optional -->

  <script>
  const SearchServiceDataPathRoot = ("/" || "/").endsWith("/") ?
    "/" || "/" :
    "//" || "/";
  const SearchServiceDataPath = SearchServiceDataPathRoot + "content.json";

  function loadSearchScript() {
    // see: layout/_partial/scripts/_ctrl/cdnCtrl.ejs
    return volantis.js("/js/search/hexo.0e52f222.js");
  }

  function loadSearchService() {
    loadSearchScript();
    document.querySelectorAll(".input.u-search-input").forEach((e) => {
      e.removeEventListener("focus", loadSearchService, false);
    });

    document.querySelectorAll(".u-search-form").forEach((e) => {
      e.addEventListener("submit", (event) => {
        event.preventDefault();
      }, false);
    });
  }

  // 打开并搜索 字符串 s
  function OpenSearch(s) {
    if (typeof SearchService === 'undefined')
      loadSearchScript().then(() => {
        SearchService.setQueryText(s);
        SearchService.search();
      });
    else {
      SearchService.setQueryText(s);
      SearchService.search();
    }
  }

  // 访问含有 ?s=xxx  的链接时打开搜索 // 与搜索引擎 structured data 相关: /scripts/helpers/structured-data/lib/config.js
  if (window.location.search && /^\?s=/g.test(window.location.search)) {
    let queryText = decodeURI(window.location.search)
      .replace(/\ /g, "-")
      .replace(/^\?s=/g, "");
    OpenSearch(queryText);
  }

  // 搜索输入框获取焦点时加载搜索
  document.querySelectorAll(".input.u-search-input").forEach((e) => {
    e.addEventListener("focus", loadSearchService, false);
  });
</script>







  <script>



  function pjax_highlightjs_copyCode(){
    if (!(document.querySelector(".highlight .code pre") ||
      document.querySelector(".article pre code"))) {
      return;
    }
    VolantisApp.utilCopyCode(".highlight .code pre, .article pre code")
  }
  volantis.requestAnimationFrame(pjax_highlightjs_copyCode)
  volantis.pjax.push(pjax_highlightjs_copyCode)

</script>












  <script>
  function load_swiper() {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.css");
    volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.js").then(() => {
      pjax_swiper();
    });
  }

  load_swiper();

  function pjax_swiper() {
    volantis.swiper = new Swiper('.swiper-container', {
      slidesPerView: 'auto',
      spaceBetween: 8,
      centeredSlides: true,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  }

  volantis.pjax.push(() => {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    if (typeof volantis.swiper === "undefined") {
      load_swiper();
    } else {
      pjax_swiper();
    }
  });
</script>


<!-- pjax 标签必须存在于所有页面 否则 pjax error -->
<pjax>

        <script>
  // https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/math/mathjax.swig
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = "https://unpkg.com/volantis-static@0.0.1654736714924/libs/mathjax/es5/tex-mml-chtml.js";
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    // 文章章节标题不能为 “MathJax” ，否则会报错。
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typesetPromise();
  }
</script>



</pjax>

<script>
  function listennSidebarTOC() {
    const navItems = document.querySelectorAll(".toc li");
    if (!navItems.length) return;
    let targets = []
    const sections = [...navItems].map((element) => {
      const link = element.querySelector(".toc-link");
      const target = document.getElementById(
        decodeURI(link.getAttribute("href")).replace("#", "")
      );
      targets.push(target)
      // 解除 a 标签 href 的 锚点定位, a 标签 href 的 锚点定位 会随机启用?? 产生错位???
      link.setAttribute("onclick","return false;")
      link.setAttribute("toc-action","toc-"+decodeURI(link.getAttribute("href")).replace("#", ""))
      link.setAttribute("href","/")
      // 配置 点击 触发新的锚点定位
      link.addEventListener("click", (event) => {
        event.preventDefault();
        // 这里的 addTop 是通过错位使得 toc 自动展开.
        volantis.scroll.to(target,{addTop: 5, observer:true})
        // Anchor id
        history.pushState(null, document.title, "#" + target.id);
      });
      return target;
    });

    function activateNavByIndex(target) {
      if (target.classList.contains("active-current")) return;

      document.querySelectorAll(".toc .active").forEach((element) => {
        element.classList.remove("active", "active-current");
      });
      target.classList.add("active", "active-current");
      let parent = target.parentNode;
      while (!parent.matches(".toc")) {
        if (parent.matches("li")) parent.classList.add("active");
        parent = parent.parentNode;
      }
    }

    // 方案一：
    volantis.activateNavIndex=0
    activateNavByIndex(navItems[volantis.activateNavIndex])
    volantis.scroll.push(()=>{
      if (targets[0].getBoundingClientRect().top >= 0) {
        volantis.activateNavIndex = 0
      }else if (targets[targets.length-1].getBoundingClientRect().top < 0) {
        volantis.activateNavIndex = targets.length-1
      } else {
        for (let index = 0; index < targets.length; index++) {
          const target0 = targets[index];
          const target1 = targets[(index+1)%targets.length];
          if (target0.getBoundingClientRect().top < 0&&target1.getBoundingClientRect().top >= 0) {
            volantis.activateNavIndex=index
            break;
          }
        }
      }
      activateNavByIndex(navItems[volantis.activateNavIndex])
    })

    // 方案二：
    // IntersectionObserver 不是完美精确到像素级别 也不是低延时性的
    // function findIndex(entries) {
    //   let index = 0;
    //   let entry = entries[index];
    //   if (entry.boundingClientRect.top > 0) {
    //     index = sections.indexOf(entry.target);
    //     return index === 0 ? 0 : index - 1;
    //   }
    //   for (; index < entries.length; index++) {
    //     if (entries[index].boundingClientRect.top <= 0) {
    //       entry = entries[index];
    //     } else {
    //       return sections.indexOf(entry.target);
    //     }
    //   }
    //   return sections.indexOf(entry.target);
    // }
    // function createIntersectionObserver(marginTop) {
    //   marginTop = Math.floor(marginTop + 10000);
    //   let intersectionObserver = new IntersectionObserver(
    //     (entries, observe) => {
    //       let scrollHeight = document.documentElement.scrollHeight;
    //       if (scrollHeight > marginTop) {
    //         observe.disconnect();
    //         createIntersectionObserver(scrollHeight);
    //         return;
    //       }
    //       let index = findIndex(entries);
    //       activateNavByIndex(navItems[index]);
    //     }, {
    //       rootMargin: marginTop + "px 0px -100% 0px",
    //       threshold: 0,
    //     }
    //   );
    //   sections.forEach((element) => {
    //     element && intersectionObserver.observe(element);
    //   });
    // }
    // createIntersectionObserver(document.documentElement.scrollHeight);
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
  document.addEventListener("pjax:success", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
</script>

<script>
  try {
    // https://web.dev/content-visibility/
    // https://www.caniuse.com/?search=content-visibility
    // https://infrequently.org/2020/12/content-visibility-scroll-fix/
    // https://infrequently.org/2020/12/resize-resilient-deferred-rendering/

    // 备注 目前已知的问题:
    // 动态修改导致的内容高度变化(例如评论框异步渲染的外部盒子高度变化) 无法提前获知, 进而导致的首次滚动条跳动无法去除 (wontfix) 事实上不使用 content-visibility 也会有跳动, 不过是比使用 content-visibility 跳动提前
    // scrollreveal 插件潜在问题 目前尚不明确

    let eqIsh = (a, b, fuzz = 2) => {
      return Math.abs(a - b) <= fuzz;
    };

    let rectNotEQ = (a, b) => {
      return !eqIsh(a.width, b.width) || !eqIsh(a.height, b.height);
    };

    // Keep a map of elements and the dimensions of
    // their place-holders, re-setting the element's
    // intrinsic size when we get updated measurements
    // from observers.
    let spaced = new WeakMap();

    // Only call this when known cheap, post layout
    let reserveSpace = (el, rect = el.getClientBoundingRect()) => {
      let old = spaced.get(el);
      // Set intrinsic size to prevent jumping on un-painting:
      //    https://drafts.csswg.org/css-sizing-4/#intrinsic-size-override
      if (!old || rectNotEQ(old, rect)) {
        spaced.set(el, rect);
        el.style["contain-intrinsic-size"] = `${rect.width}px ${rect.height}px`;
      }
    };

    let iObs = new IntersectionObserver(
      (entries, o) => {
        entries.forEach((entry) => {
          // We don't care if the element is intersecting or
          // has been laid out as our page structure ensures
          // they'll get the right width.
          reserveSpace(entry.target, entry.boundingClientRect);
        });
      },
      { rootMargin: "500px 0px 500px 0px" }
    );

    let rObs = new ResizeObserver((entries, o) => {
      entries.forEach((entry) => {
        reserveSpace(entry.target, entry.contentRect);
      });
    });

    let resizeResilientDeferredRendering = (Selector) => {
      let articles = document.querySelectorAll(Selector);

      if (articles.length) {
        articles.forEach((el) => {
          iObs.observe(el);
          rObs.observe(el);
        });

        // Workaround for Chrome bug, part 2.
        //
        // Re-enable browser management of rendering for the
        // first article after the first paint. Double-rAF
        // to ensure we get called after a layout.
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            articles[0].style["content-visibility"] = "auto";
          });
        });
      }
    };

    let contentVisibilityScrollFix = () => {
      if (!("content-visibility" in document.documentElement.style)) {
        return;
      }
      resizeResilientDeferredRendering(".post-story");
    };
    contentVisibilityScrollFix();
    volantis.pjax.push(contentVisibilityScrollFix);
  } catch (error) {
    console.log(error);
  }
</script>



  <script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"Adversarr's Blog","url":"http://adversarr.github.io/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"Adversarr","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"http://adversarr.github.io/","sameAs":["https://github.com/volantis-x"],"description":"Je pense, donc je suis"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"http://adversarr.github.io/","name":"Adversarr's Blog"}},{"@type":"ListItem","position":3,"item":{"@id":"http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/","name":"Siggraph 2021 course - An Introduction to Physics-based Animation"}}]},{"@context":"http://schema.org","@type":"WebSite","name":"Adversarr's Blog","url":"http://adversarr.github.io/","keywords":"study","description":"Je pense, donc je suis","author":{"@type":"Person","name":"Adversarr","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"http://adversarr.github.io/","description":"Je pense, donc je suis"},"publisher":{"@type":"Organization","name":"Adversarr's Blog","url":"http://adversarr.github.io/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"potentialAction":{"@type":"SearchAction","name":"Site Search","target":{"@type":"EntryPoint","urlTemplate":"http://adversarr.github.io?s={search_term_string}"},"query-input":"required name=search_term_string"}},{"@context":"http://schema.org","@type":"BlogPosting","headline":"Siggraph 2021 course - An Introduction to Physics-based Animation","description":"Siggraph 2021 course notes.\nSee more in Siyuan.","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/"},"author":{"@type":"Person","name":"Adversarr","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"http://adversarr.github.io/"},"publisher":{"@type":"Organization","name":"Adversarr's Blog","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"http://adversarr.github.io/2022/12/04/CG/siggraph-courses/Sig2021course-Intro-to-PBA/","wordCount":47,"datePublished":"2022-12-04T15:15:08.000Z","dateModified":"2023-02-05T04:00:01.093Z","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}]</script>



      
        <!--
  pjax重载区域接口：
  1.  <pjax></pjax> 标签 pjax 标签必须存在于所有页面 否则 pjax error
  2.  script[data-pjax]
  3.  .pjax-reload script
  4.  .pjax
-->



<script src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/pjax/pjax.min.js"></script>


<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([onclick="return false;"]):not([onclick="return!1"]):not([target="_blank"]):not([target="view_window"]):not([href$=".xml"])',
        selectors: [
          "head title",
          "head meta[name=keywords]",
          "head meta[name=description]",
          
          "#l_main",
          "#pjax-header-nav-list",
          ".pjax",
          "pjax", // <pjax></pjax> 标签
          "script[data-pjax], .pjax-reload script" // script标签添加data-pjax 或 script标签外层添加.pjax-reload 的script代码段重载
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000,
        
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      // 使用 volantis.pjax.send 方法传入pjax:send回调函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      // 使用 volantis.pjax.push 方法传入重载函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.complete.start();
    });

    document.addEventListener('pjax:error', function (e) {
      if(volantis.debug) {
        console.error(e);
        console.log('pjax error: \n' + JSON.stringify(e));
      }else{
        // 使用 volantis.pjax.error 方法传入pjax:error回调函数 参见layout/_partial/scripts/global.ejs
        volantis.pjax.method.error.start();
        window.location.href = e.triggerElement.href;
      }
    });
</script>

      
    </div>
    <!-- import body_end begin-->
    <!-- import body_end end-->
    <!-- Custom Files bodyEnd begin-->
    
    <!-- Custom Files bodyEnd end--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </body>
</html>
